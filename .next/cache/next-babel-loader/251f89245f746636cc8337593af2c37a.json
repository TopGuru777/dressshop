{"ast":null,"code":"import connectDB from '../../utils/connectDB';\nimport Product from '../../models/Product';\nexport default (async (req, res) => {\n  await connectDB();\n\n  try {\n    let {\n      category,\n      price\n    } = req.query;\n    category = category.toLowerCase();\n    let products = [];\n    let sort;\n\n    if (price) {\n      products = await Product.find({\n        category\n      });\n    } else {\n      if (price === 'low') {\n        sort = 1;\n      } else {\n        sort = -1;\n      }\n\n      products = await Product.find({\n        category\n      }).sort({\n        price: sort\n      });\n    }\n\n    res.status(200).json({\n      products\n    });\n  } catch (error) {\n    console.error(error);\n    res.status(500).send('Error in getting categories');\n  }\n});","map":{"version":3,"sources":["/home/russ/projects/dress-shop/pages/api/category.js"],"names":["connectDB","Product","req","res","category","price","query","toLowerCase","products","sort","find","status","json","error","console","send"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,uBAAtB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACjC,QAAMH,SAAS,EAAf;;AACA,MAAI;AACF,QAAI;AAAEI,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QAAsBH,GAAG,CAACI,KAA9B;AACAF,IAAAA,QAAQ,GAAGA,QAAQ,CAACG,WAAT,EAAX;AACA,QAAIC,QAAQ,GAAG,EAAf;AACA,QAAIC,IAAJ;;AAEA,QAAIJ,KAAJ,EAAW;AACTG,MAAAA,QAAQ,GAAG,MAAMP,OAAO,CAACS,IAAR,CAAa;AAAEN,QAAAA;AAAF,OAAb,CAAjB;AACD,KAFD,MAEO;AACL,UAAIC,KAAK,KAAK,KAAd,EAAqB;AACnBI,QAAAA,IAAI,GAAG,CAAP;AACD,OAFD,MAEO;AACLA,QAAAA,IAAI,GAAG,CAAC,CAAR;AACD;;AACDD,MAAAA,QAAQ,GAAG,MAAMP,OAAO,CAACS,IAAR,CAAa;AAAEN,QAAAA;AAAF,OAAb,EAA2BK,IAA3B,CAAgC;AAAEJ,QAAAA,KAAK,EAAEI;AAAT,OAAhC,CAAjB;AACD;;AACDN,IAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEJ,MAAAA;AAAF,KAArB;AACD,GAjBD,CAiBE,OAAOK,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACAV,IAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBI,IAAhB,CAAqB,6BAArB;AACD;AACF,CAvBD","sourcesContent":["import connectDB from '../../utils/connectDB';\nimport Product from '../../models/Product';\n\nexport default async (req, res) => {\n  await connectDB();\n  try {\n    let { category, price } = req.query;\n    category = category.toLowerCase();\n    let products = [];\n    let sort;\n\n    if (price) {\n      products = await Product.find({ category });\n    } else {\n      if (price === 'low') {\n        sort = 1;\n      } else {\n        sort = -1;\n      }\n      products = await Product.find({ category }).sort({ price: sort });\n    }\n    res.status(200).json({ products });\n  } catch (error) {\n    console.error(error);\n    res.status(500).send('Error in getting categories');\n  }\n};\n"]},"metadata":{},"sourceType":"module"}