{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/russ/projects/dress-shop/components/Admin/Home/ProductForm.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport baseURL from '../../../utils/baseURL';\nimport Spinner from '../../Shared/Loader/Spinner';\n\nconst ProductForm = ({\n  onSubmit\n}) => {\n  const initState = {\n    name: '',\n    price: '',\n    description: '',\n    category: ''\n  };\n  const {\n    0: product,\n    1: setProduct\n  } = useState(initState);\n  const {\n    0: imagePreview,\n    1: setImagePreview\n  } = useState('');\n  const {\n    0: file,\n    1: setFile\n  } = useState('');\n  const {\n    0: submit,\n    1: setSubmit\n  } = useState(false);\n\n  const handleChange = e => {\n    if (e.target.name === 'file') {\n      let reader = new FileReader();\n\n      reader.onloadend = () => {\n        setImagePreview(reader.result);\n      };\n\n      reader.readAsDataURL(event.target.files[0]);\n      setFile(e.target.files[0]);\n    } else {\n      setProduct(_objectSpread({}, product, {\n        [e.target.name]: e.target.value\n      }));\n    }\n  };\n\n  const imageUpload = async () => {\n    try {\n      let data = new FormData();\n      data.append('file', file);\n      data.append('upload_preset', 'dress-shop');\n      data.append('cloud_name', 'djlbfjouc'); //upload image to cloudinary\n\n      const res = await axios.post(process.env.CLOUDINARY_URL, data);\n      return res.data.secure_url;\n    } catch (error) {\n      console.log(error.response);\n    }\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      setSubmit(true); //get url of image\n\n      const imageURL = await imageUpload();\n\n      const payload = _objectSpread({}, product, {\n        imageURL\n      }); //save product to db\n\n\n      const {\n        data\n      } = await axios.post(`${baseURL}/api/products`, payload);\n      reset();\n      onSubmit(data);\n    } catch (error) {\n      console.log(error.response);\n    } finally {\n      setSubmit(false);\n    }\n  };\n\n  const reset = () => {\n    setProduct(initState);\n    setFile('');\n    setImagePreview('');\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"jsx-570827191\" + \" \" + \"form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-570827191\" + \" \" + \"group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    placeholder: \"Product Name\",\n    onChange: handleChange,\n    required: true,\n    value: product.name,\n    className: \"jsx-570827191\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"jsx-570827191\" + \" \" + \"group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-570827191\" + \" \" + \"btn-upload-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    type: \"file\",\n    name: \"file\",\n    onChange: handleChange,\n    required: true,\n    className: \"jsx-570827191\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    className: \"jsx-570827191\" + \" \" + \"btn-upload\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"Upload Image\")), __jsx(\"div\", {\n    className: \"jsx-570827191\" + \" \" + \"img-upload-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-570827191\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, imagePreview ? __jsx(\"img\", {\n    src: imagePreview,\n    className: \"jsx-570827191\" + \" \" + \"preview-img\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }) : __jsx(\"div\", {\n    className: \"jsx-570827191\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \" Image goes here \")))), __jsx(\"div\", {\n    className: \"jsx-570827191\" + \" \" + \"group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"price\",\n    placeholder: \"Product Price\",\n    onChange: handleChange,\n    required: true,\n    value: product.price,\n    className: \"jsx-570827191\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"jsx-570827191\" + \" \" + \"group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"description\",\n    placeholder: \"Product Description\",\n    onChange: handleChange,\n    required: true,\n    value: product.description,\n    className: \"jsx-570827191\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"jsx-570827191\" + \" \" + \"group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, __jsx(\"select\", {\n    name: \"category\",\n    id: \"\",\n    onChange: handleChange,\n    required: true,\n    value: product.category,\n    className: \"jsx-570827191\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, __jsx(\"option\", {\n    value: \"men\",\n    className: \"jsx-570827191\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, \"Men\"), __jsx(\"option\", {\n    value: \"women\",\n    className: \"jsx-570827191\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, \"Women\"))), __jsx(\"div\", {\n    className: \"jsx-570827191\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, __jsx(\"button\", {\n    disabled: submit,\n    className: \"jsx-570827191\" + \" \" + \"btn-submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, submit ? __jsx(Spinner, {\n    color: \"#fff\",\n    width: 40,\n    height: 40,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }) : 'Submit'))), __jsx(_JSXStyle, {\n    id: \"570827191\",\n    __self: this\n  }, \".preview-img.jsx-570827191{width:30rem;height:30rem;object-fit:contain;}.form.jsx-570827191{width:60rem;}.form.jsx-570827191 input.jsx-570827191{border:1px solid transparent;border-bottom:1px solid var(--color-dark);width:100%;height:5rem;font-size:1.6rem;}.form.jsx-570827191 input.jsx-570827191:focus{outline:none;}.form.jsx-570827191 select.jsx-570827191{border:1px solid var(--color-dark);width:100%;height:5rem;font-size:1.6rem;background-color:#fff;padding:0 1rem;}.group.jsx-570827191{padding:1rem 0;margin-bottom:1rem;}.btn-submit.jsx-570827191{height:6rem;width:100%;background-color:var(--color-dark);color:#fff;font-size:2rem;border:1px solid transparent;}.img-upload-container.jsx-570827191{position:relative;width:30rem;height:30rem;border:1px solid #eee;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;font-size:1.8rem;overflow:hidden;}.btn-upload-container.jsx-570827191 input.jsx-570827191{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;}.btn-upload-container.jsx-570827191{position:relative;width:20rem;height:5rem;margin-bottom:2rem;cursor:pointer;}.btn-upload.jsx-570827191{background-color:var(--color-dark);border:1px solid transparent;color:#fff;font-size:1.7rem;border-radius:6px;width:100%;height:100%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1c3MvcHJvamVjdHMvZHJlc3Mtc2hvcC9jb21wb25lbnRzL0FkbWluL0hvbWUvUHJvZHVjdEZvcm0uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBc0prQixBQUd1QixBQU1BLEFBSWlCLEFBUWhCLEFBSXNCLEFBU3BCLEFBS0gsQUFTTSxBQVlSLEFBU1EsQUFRaUIsVUFoQmpCLEVBekRMLEFBTWYsQUE4QmEsQ0FsQmIsRUFhcUIsR0FjUCxBQXFCQSxLQTdCdUIsRUFwQ2hCLEdBeURiLENBaERvQyxDQW9DN0IsQUFxQkQsSUFuQ2QsQUEyQlMsQ0FyQ0ksQUFvRGtCLE1BZGxCLENBUVEsQ0FyQkcsQ0E3Q3hCLEVBcUJjLE1Bc0NBLE1BckNLLEFBY04sR0ErQkksR0FQakIsQUFhYSxDQTNCRSxJQVRFLEVBNUJKLElBY1csQUFtREwsQ0FObkIsTUExRGMsRUE0QmlCLFFBcUNYLEVBaEVELEdBYUYsYUFvREosQ0FoRWIsQ0FhQSxDQWNBLFFBc0NjLFlBQ2QsTUEvQnFCLDZGQUNJLG1HQUNOLGlCQUNELGdCQUNsQiIsImZpbGUiOiIvaG9tZS9ydXNzL3Byb2plY3RzL2RyZXNzLXNob3AvY29tcG9uZW50cy9BZG1pbi9Ib21lL1Byb2R1Y3RGb3JtLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBiYXNlVVJMIGZyb20gJy4uLy4uLy4uL3V0aWxzL2Jhc2VVUkwnO1xuaW1wb3J0IFNwaW5uZXIgZnJvbSAnLi4vLi4vU2hhcmVkL0xvYWRlci9TcGlubmVyJztcblxuY29uc3QgUHJvZHVjdEZvcm0gPSAoeyBvblN1Ym1pdCB9KSA9PiB7XG4gIGNvbnN0IGluaXRTdGF0ZSA9IHtcbiAgICBuYW1lOiAnJyxcbiAgICBwcmljZTogJycsXG4gICAgZGVzY3JpcHRpb246ICcnLFxuICAgIGNhdGVnb3J5OiAnJ1xuICB9O1xuXG4gIGNvbnN0IFtwcm9kdWN0LCBzZXRQcm9kdWN0XSA9IHVzZVN0YXRlKGluaXRTdGF0ZSk7XG4gIGNvbnN0IFtpbWFnZVByZXZpZXcsIHNldEltYWdlUHJldmlld10gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtmaWxlLCBzZXRGaWxlXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW3N1Ym1pdCwgc2V0U3VibWl0XSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCBoYW5kbGVDaGFuZ2UgPSBlID0+IHtcbiAgICBpZiAoZS50YXJnZXQubmFtZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSAoKSA9PiB7XG4gICAgICAgIHNldEltYWdlUHJldmlldyhyZWFkZXIucmVzdWx0KTtcbiAgICAgIH07XG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChldmVudC50YXJnZXQuZmlsZXNbMF0pO1xuICAgICAgc2V0RmlsZShlLnRhcmdldC5maWxlc1swXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFByb2R1Y3Qoe1xuICAgICAgICAuLi5wcm9kdWN0LFxuICAgICAgICBbZS50YXJnZXQubmFtZV06IGUudGFyZ2V0LnZhbHVlXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaW1hZ2VVcGxvYWQgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICBkYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuICAgICAgZGF0YS5hcHBlbmQoJ3VwbG9hZF9wcmVzZXQnLCAnZHJlc3Mtc2hvcCcpO1xuICAgICAgZGF0YS5hcHBlbmQoJ2Nsb3VkX25hbWUnLCAnZGpsYmZqb3VjJyk7XG4gICAgICAvL3VwbG9hZCBpbWFnZSB0byBjbG91ZGluYXJ5XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5wb3N0KHByb2Nlc3MuZW52LkNMT1VESU5BUllfVVJMLCBkYXRhKTtcbiAgICAgIHJldHVybiByZXMuZGF0YS5zZWN1cmVfdXJsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0cnkge1xuICAgICAgc2V0U3VibWl0KHRydWUpO1xuICAgICAgLy9nZXQgdXJsIG9mIGltYWdlXG4gICAgICBjb25zdCBpbWFnZVVSTCA9IGF3YWl0IGltYWdlVXBsb2FkKCk7XG4gICAgICBjb25zdCBwYXlsb2FkID0geyAuLi5wcm9kdWN0LCBpbWFnZVVSTCB9O1xuICAgICAgLy9zYXZlIHByb2R1Y3QgdG8gZGJcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MucG9zdChgJHtiYXNlVVJMfS9hcGkvcHJvZHVjdHNgLCBwYXlsb2FkKTtcbiAgICAgIHJlc2V0KCk7XG4gICAgICBvblN1Ym1pdChkYXRhKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRTdWJtaXQoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCByZXNldCA9ICgpID0+IHtcbiAgICBzZXRQcm9kdWN0KGluaXRTdGF0ZSk7XG4gICAgc2V0RmlsZSgnJyk7XG4gICAgc2V0SW1hZ2VQcmV2aWV3KCcnKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fSBjbGFzc05hbWU9XCJmb3JtXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JvdXBcIj5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUHJvZHVjdCBOYW1lXCJcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICByZXF1aXJlZD17dHJ1ZX1cbiAgICAgICAgICAgIHZhbHVlPXtwcm9kdWN0Lm5hbWV9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JvdXBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ0bi11cGxvYWQtY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cImZpbGVcIlxuICAgICAgICAgICAgICBuYW1lPVwiZmlsZVwiXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAgIHJlcXVpcmVkPXt0cnVlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuLXVwbG9hZFwiPlVwbG9hZCBJbWFnZTwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbWctdXBsb2FkLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIHtpbWFnZVByZXZpZXcgPyAoXG4gICAgICAgICAgICAgICAgICA8aW1nIHNyYz17aW1hZ2VQcmV2aWV3fSBjbGFzc05hbWU9XCJwcmV2aWV3LWltZ1wiIC8+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxkaXY+IEltYWdlIGdvZXMgaGVyZSA8L2Rpdj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JvdXBcIj5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIG5hbWU9XCJwcmljZVwiXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlByb2R1Y3QgUHJpY2VcIlxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgIHJlcXVpcmVkPXt0cnVlfVxuICAgICAgICAgICAgdmFsdWU9e3Byb2R1Y3QucHJpY2V9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JvdXBcIj5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgIG5hbWU9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlByb2R1Y3QgRGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgIHJlcXVpcmVkPXt0cnVlfVxuICAgICAgICAgICAgdmFsdWU9e3Byb2R1Y3QuZGVzY3JpcHRpb259XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JvdXBcIj5cbiAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICBuYW1lPVwiY2F0ZWdvcnlcIlxuICAgICAgICAgICAgaWQ9XCJcIlxuICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgIHJlcXVpcmVkPXt0cnVlfVxuICAgICAgICAgICAgdmFsdWU9e3Byb2R1Y3QuY2F0ZWdvcnl9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm1lblwiPk1lbjwvb3B0aW9uPlxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIndvbWVuXCI+V29tZW48L29wdGlvbj5cbiAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJidG4tc3VibWl0XCIgZGlzYWJsZWQ9e3N1Ym1pdH0+XG4gICAgICAgICAgICB7c3VibWl0ID8gKFxuICAgICAgICAgICAgICA8U3Bpbm5lciBjb2xvcj1cIiNmZmZcIiB3aWR0aD17NDB9IGhlaWdodD17NDB9IC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAnU3VibWl0J1xuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Zvcm0+XG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIC5wcmV2aWV3LWltZyB7XG4gICAgICAgICAgd2lkdGg6IDMwcmVtO1xuICAgICAgICAgIGhlaWdodDogMzByZW07XG4gICAgICAgICAgb2JqZWN0LWZpdDogY29udGFpbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC5mb3JtIHtcbiAgICAgICAgICB3aWR0aDogNjByZW07XG4gICAgICAgIH1cblxuICAgICAgICAuZm9ybSBpbnB1dCB7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWNvbG9yLWRhcmspO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGhlaWdodDogNXJlbTtcbiAgICAgICAgICBmb250LXNpemU6IDEuNnJlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5mb3JtIGlucHV0OmZvY3VzIHtcbiAgICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICB9XG5cbiAgICAgICAgLmZvcm0gc2VsZWN0IHtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1jb2xvci1kYXJrKTtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBoZWlnaHQ6IDVyZW07XG4gICAgICAgICAgZm9udC1zaXplOiAxLjZyZW07XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICAgICAgICBwYWRkaW5nOiAwIDFyZW07XG4gICAgICAgIH1cblxuICAgICAgICAuZ3JvdXAge1xuICAgICAgICAgIHBhZGRpbmc6IDFyZW0gMDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxcmVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLmJ0bi1zdWJtaXQge1xuICAgICAgICAgIGhlaWdodDogNnJlbTtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1kYXJrKTtcbiAgICAgICAgICBjb2xvcjogI2ZmZjtcbiAgICAgICAgICBmb250LXNpemU6IDJyZW07XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICAuaW1nLXVwbG9hZC1jb250YWluZXIge1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICB3aWR0aDogMzByZW07XG4gICAgICAgICAgaGVpZ2h0OiAzMHJlbTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZWVlO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICBmb250LXNpemU6IDEuOHJlbTtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB9XG5cbiAgICAgICAgLmJ0bi11cGxvYWQtY29udGFpbmVyIGlucHV0IHtcbiAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIH1cblxuICAgICAgICAuYnRuLXVwbG9hZC1jb250YWluZXIge1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICB3aWR0aDogMjByZW07XG4gICAgICAgICAgaGVpZ2h0OiA1cmVtO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDJyZW07XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgLmJ0bi11cGxvYWQge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLWRhcmspO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgICAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMS43cmVtO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8Lz5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFByb2R1Y3RGb3JtO1xuIl19 */\\n/*@ sourceURL=/home/russ/projects/dress-shop/components/Admin/Home/ProductForm.js */\"));\n};\n\nexport default ProductForm;","map":{"version":3,"sources":["/home/russ/projects/dress-shop/components/Admin/Home/ProductForm.js"],"names":["React","useState","axios","baseURL","Spinner","ProductForm","onSubmit","initState","name","price","description","category","product","setProduct","imagePreview","setImagePreview","file","setFile","submit","setSubmit","handleChange","e","target","reader","FileReader","onloadend","result","readAsDataURL","event","files","value","imageUpload","data","FormData","append","res","post","process","env","CLOUDINARY_URL","secure_url","error","console","log","response","handleSubmit","preventDefault","imageURL","payload","reset"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport baseURL from '../../../utils/baseURL';\nimport Spinner from '../../Shared/Loader/Spinner';\n\nconst ProductForm = ({ onSubmit }) => {\n  const initState = {\n    name: '',\n    price: '',\n    description: '',\n    category: ''\n  };\n\n  const [product, setProduct] = useState(initState);\n  const [imagePreview, setImagePreview] = useState('');\n  const [file, setFile] = useState('');\n  const [submit, setSubmit] = useState(false);\n\n  const handleChange = e => {\n    if (e.target.name === 'file') {\n      let reader = new FileReader();\n      reader.onloadend = () => {\n        setImagePreview(reader.result);\n      };\n      reader.readAsDataURL(event.target.files[0]);\n      setFile(e.target.files[0]);\n    } else {\n      setProduct({\n        ...product,\n        [e.target.name]: e.target.value\n      });\n    }\n  };\n\n  const imageUpload = async () => {\n    try {\n      let data = new FormData();\n      data.append('file', file);\n      data.append('upload_preset', 'dress-shop');\n      data.append('cloud_name', 'djlbfjouc');\n      //upload image to cloudinary\n      const res = await axios.post(process.env.CLOUDINARY_URL, data);\n      return res.data.secure_url;\n    } catch (error) {\n      console.log(error.response);\n    }\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      setSubmit(true);\n      //get url of image\n      const imageURL = await imageUpload();\n      const payload = { ...product, imageURL };\n      //save product to db\n      const { data } = await axios.post(`${baseURL}/api/products`, payload);\n      reset();\n      onSubmit(data);\n    } catch (error) {\n      console.log(error.response);\n    } finally {\n      setSubmit(false);\n    }\n  };\n\n  const reset = () => {\n    setProduct(initState);\n    setFile('');\n    setImagePreview('');\n  };\n\n  return (\n    <>\n      <form onSubmit={handleSubmit} className=\"form\">\n        <div className=\"group\">\n          <input\n            type=\"text\"\n            name=\"name\"\n            placeholder=\"Product Name\"\n            onChange={handleChange}\n            required={true}\n            value={product.name}\n          />\n        </div>\n        <div className=\"group\">\n          <div className=\"btn-upload-container\">\n            <input\n              type=\"file\"\n              name=\"file\"\n              onChange={handleChange}\n              required={true}\n            />\n            <button className=\"btn-upload\">Upload Image</button>\n          </div>\n\n          <div className=\"img-upload-container\">\n            {\n              <div>\n                {imagePreview ? (\n                  <img src={imagePreview} className=\"preview-img\" />\n                ) : (\n                  <div> Image goes here </div>\n                )}\n              </div>\n            }\n          </div>\n        </div>\n        <div className=\"group\">\n          <input\n            type=\"text\"\n            name=\"price\"\n            placeholder=\"Product Price\"\n            onChange={handleChange}\n            required={true}\n            value={product.price}\n          />\n        </div>\n        <div className=\"group\">\n          <input\n            type=\"text\"\n            name=\"description\"\n            placeholder=\"Product Description\"\n            onChange={handleChange}\n            required={true}\n            value={product.description}\n          />\n        </div>\n        <div className=\"group\">\n          <select\n            name=\"category\"\n            id=\"\"\n            onChange={handleChange}\n            required={true}\n            value={product.category}\n          >\n            <option value=\"men\">Men</option>\n            <option value=\"women\">Women</option>\n          </select>\n        </div>\n        <div>\n          <button className=\"btn-submit\" disabled={submit}>\n            {submit ? (\n              <Spinner color=\"#fff\" width={40} height={40} />\n            ) : (\n              'Submit'\n            )}\n          </button>\n        </div>\n      </form>\n      <style jsx>{`\n        .preview-img {\n          width: 30rem;\n          height: 30rem;\n          object-fit: contain;\n        }\n\n        .form {\n          width: 60rem;\n        }\n\n        .form input {\n          border: 1px solid transparent;\n          border-bottom: 1px solid var(--color-dark);\n          width: 100%;\n          height: 5rem;\n          font-size: 1.6rem;\n        }\n\n        .form input:focus {\n          outline: none;\n        }\n\n        .form select {\n          border: 1px solid var(--color-dark);\n          width: 100%;\n          height: 5rem;\n          font-size: 1.6rem;\n          background-color: #fff;\n          padding: 0 1rem;\n        }\n\n        .group {\n          padding: 1rem 0;\n          margin-bottom: 1rem;\n        }\n\n        .btn-submit {\n          height: 6rem;\n          width: 100%;\n          background-color: var(--color-dark);\n          color: #fff;\n          font-size: 2rem;\n          border: 1px solid transparent;\n        }\n\n        .img-upload-container {\n          position: relative;\n          width: 30rem;\n          height: 30rem;\n          border: 1px solid #eee;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 1.8rem;\n          overflow: hidden;\n        }\n\n        .btn-upload-container input {\n          opacity: 0;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n        }\n\n        .btn-upload-container {\n          position: relative;\n          width: 20rem;\n          height: 5rem;\n          margin-bottom: 2rem;\n          cursor: pointer;\n        }\n\n        .btn-upload {\n          background-color: var(--color-dark);\n          border: 1px solid transparent;\n          color: #fff;\n          font-size: 1.7rem;\n          border-radius: 6px;\n          width: 100%;\n          height: 100%;\n        }\n      `}</style>\n    </>\n  );\n};\n\nexport default ProductForm;\n"]},"metadata":{},"sourceType":"module"}