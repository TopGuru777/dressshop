{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar _jsxFileName = \"/home/russ/projects/dress-shop/pages/login.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useRef } from 'react';\nimport Router from 'next/router';\nimport { Formik } from 'formik';\nimport { useAuth } from '../store';\nimport * as Yup from 'yup';\nimport Link from 'next/link';\nimport Layout from '../components/Layout';\nimport Spinner from '../components/Shared/Loader/Spinner';\nimport Alert from '../components/Shared/Alert';\nimport PageLoader from '../components/Shared/Loader/PageLoader';\nimport { set } from 'mongoose';\nvar LoginSchema = Yup.object().shape({\n  password: Yup.string().required('Password is required').min(6),\n  email: Yup.string().email('Invalid email').required('Email is required')\n});\n\nvar Login = function Login() {\n  var _useState = useState(false),\n      submit = _useState[0],\n      setSubmit = _useState[1];\n\n  var _useState2 = useState(false),\n      showLoader = _useState2[0],\n      setShowLoader = _useState2[1];\n\n  var _useAuth = useAuth(),\n      error = _useAuth.error,\n      login = _useAuth.login,\n      clearError = _useAuth.clearError;\n\n  var isCurrent = useRef(false);\n  useEffect(function () {\n    return function () {\n      return error && clearError();\n    };\n  }, [error]);\n  useEffect(function () {\n    var isMounted = false;\n\n    Router.onRouteChangeStart = function () {\n      if (!isMounted && isCurrent.current) {\n        setShowLoader(true);\n        isMounted = true;\n      }\n    };\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  }, showLoader && __jsx(PageLoader, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"jsx-3721802922\" + \" \" + \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, __jsx(Formik, {\n    initialValues: {\n      email: '',\n      password: ''\n    },\n    validationSchema: LoginSchema,\n    onSubmit: function _callee(values) {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setSubmit(true);\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(login(values));\n\n            case 3:\n              setSubmit(false);\n              if (!error) isCurrent.current = true;\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, function (_ref) {\n    var errors = _ref.errors,\n        touched = _ref.touched,\n        handleChange = _ref.handleChange,\n        handleSubmit = _ref.handleSubmit,\n        values = _ref.values;\n    return __jsx(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"jsx-3721802922\" + \" \" + \"auth-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, __jsx(\"h1\", {\n      className: \"jsx-3721802922\" + \" \" + \"page-heading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \" Login \"), error && __jsx(Alert, {\n      message: error,\n      type: \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), __jsx(\"div\", {\n      className: \"jsx-3721802922\" + \" \" + \"group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, __jsx(\"input\", {\n      type: \"email\",\n      placeholder: \"Email\",\n      name: \"email\",\n      value: values.email,\n      onChange: handleChange,\n      className: \"jsx-3721802922\" + \" \" + \"input \".concat(errors.email && touched.email && 'input-error'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), errors.email && touched.email ? __jsx(\"div\", {\n      className: \"jsx-3721802922\" + \" \" + \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, errors.email) : null), __jsx(\"div\", {\n      className: \"jsx-3721802922\" + \" \" + \"group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, __jsx(\"input\", {\n      type: \"password\",\n      placeholder: \"Password\",\n      name: \"password\",\n      value: values.password,\n      onChange: handleChange,\n      className: \"jsx-3721802922\" + \" \" + \"input \".concat(errors.password && touched.password && 'input-error'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), errors.password && touched.password ? __jsx(\"div\", {\n      className: \"jsx-3721802922\" + \" \" + \"error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, errors.password) : null), __jsx(\"div\", {\n      className: \"jsx-3721802922\" + \" \" + \"group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, __jsx(\"button\", {\n      type: \"submit\",\n      disabled: submit,\n      className: \"jsx-3721802922\" + \" \" + \"btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, submit ? __jsx(Spinner, {\n      width: 40,\n      height: 40,\n      color: \"#fff\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }) : 'Login')), __jsx(\"span\", {\n      className: \"jsx-3721802922\" + \" \" + \"link\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"Don't have an account?\", ' ', __jsx(Link, {\n      href: \"/signup\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, __jsx(\"a\", {\n      className: \"jsx-3721802922\" + \" \" + \"link link-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \" Create an account.\"))));\n  }))), __jsx(_JSXStyle, {\n    id: \"3721802922\",\n    __self: this\n  }, \".container.jsx-3721802922{max-width:1200px;margin:2rem auto;}.page-heading.jsx-3721802922{font-size:3rem;text-transform:uppercase;}.auth-form.jsx-3721802922{padding:2rem 0;width:50rem;margin:0 auto;}@media only screen and (max-width:600px){.auth-form.jsx-3721802922{width:100%;padding:2rem;}}.auth-form.jsx-3721802922 .input.jsx-3721802922{width:100%;height:5rem;font-size:1.7rem;border:1px solid transparent;border-bottom:1px solid #666;}.auth-form.jsx-3721802922 .input.jsx-3721802922:focus{outline:none;}.group.jsx-3721802922{margin-top:2.5rem;}.auth-form.jsx-3721802922 .btn.jsx-3721802922{width:100%;height:6rem;background-color:var(--color-dark);color:#fff;font-size:2rem;font-family:inherit;border:1px solid var(--color-dark);cursor:pointer;}.link.jsx-3721802922{margin-top:1rem;color:var(--color-dark);display:inline-block;font-size:1.7rem;}.link-text.jsx-3721802922{color:var(--color-primary);}.error.jsx-3721802922{color:red;font-size:1.6rem;padding:0.2rem 0;}.auth-form.jsx-3721802922 .input-error.jsx-3721802922{border-bottom:1px solid red;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1c3MvcHJvamVjdHMvZHJlc3Mtc2hvcC9wYWdlcy9sb2dpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFvSFMsQUFHOEIsQUFLRixBQUtBLEFBT0YsQUFNRixBQVFHLEFBSUksQUFJUCxBQVdLLEFBT1csQUFJakIsQUFNa0IsVUFMWCxDQTVDRixBQU1ILEFBZ0JELEVBUmIsRUExQjJCLEFBS2IsQ0F3Q1ksQ0FsRFAsQ0FtQ25CLEtBWG1CLEFBZ0JrQixDQXRCbkMsR0FQYyxBQThDaEIsQUFLbUIsQ0FLbkIsTUFsRUEsTUFLQSxBQW1CK0IsQUEwQlIsQ0F2Q3ZCLEdBbURBLGNBdEJhLEdBV00sUUExQlksQUFnQmQsU0FXakIsTUFWc0IsY0FoQnRCLE1BaUJxQyxtQ0FDcEIsZUFDakIiLCJmaWxlIjoiL2hvbWUvcnVzcy9wcm9qZWN0cy9kcmVzcy1zaG9wL3BhZ2VzL2xvZ2luLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSb3V0ZXIgZnJvbSAnbmV4dC9yb3V0ZXInO1xuaW1wb3J0IHsgRm9ybWlrIH0gZnJvbSAnZm9ybWlrJztcbmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICcuLi9zdG9yZSc7XG5pbXBvcnQgKiBhcyBZdXAgZnJvbSAneXVwJztcbmltcG9ydCBMaW5rIGZyb20gJ25leHQvbGluayc7XG5pbXBvcnQgTGF5b3V0IGZyb20gJy4uL2NvbXBvbmVudHMvTGF5b3V0JztcbmltcG9ydCBTcGlubmVyIGZyb20gJy4uL2NvbXBvbmVudHMvU2hhcmVkL0xvYWRlci9TcGlubmVyJztcbmltcG9ydCBBbGVydCBmcm9tICcuLi9jb21wb25lbnRzL1NoYXJlZC9BbGVydCc7XG5pbXBvcnQgUGFnZUxvYWRlciBmcm9tICcuLi9jb21wb25lbnRzL1NoYXJlZC9Mb2FkZXIvUGFnZUxvYWRlcic7XG5pbXBvcnQgeyBzZXQgfSBmcm9tICdtb25nb29zZSc7XG5cbmNvbnN0IExvZ2luU2NoZW1hID0gWXVwLm9iamVjdCgpLnNoYXBlKHtcbiAgcGFzc3dvcmQ6IFl1cC5zdHJpbmcoKVxuICAgIC5yZXF1aXJlZCgnUGFzc3dvcmQgaXMgcmVxdWlyZWQnKVxuICAgIC5taW4oNiksXG4gIGVtYWlsOiBZdXAuc3RyaW5nKClcbiAgICAuZW1haWwoJ0ludmFsaWQgZW1haWwnKVxuICAgIC5yZXF1aXJlZCgnRW1haWwgaXMgcmVxdWlyZWQnKVxufSk7XG5cbmNvbnN0IExvZ2luID0gKCkgPT4ge1xuICBjb25zdCBbc3VibWl0LCBzZXRTdWJtaXRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0xvYWRlciwgc2V0U2hvd0xvYWRlcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHsgZXJyb3IsIGxvZ2luLCBjbGVhckVycm9yIH0gPSB1c2VBdXRoKCk7XG4gIGNvbnN0IGlzQ3VycmVudCA9IHVzZVJlZihmYWxzZSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4gZXJyb3IgJiYgY2xlYXJFcnJvcigpO1xuICB9LCBbZXJyb3JdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBpc01vdW50ZWQgPSBmYWxzZTtcbiAgICBSb3V0ZXIub25Sb3V0ZUNoYW5nZVN0YXJ0ID0gKCkgPT4ge1xuICAgICAgaWYgKCFpc01vdW50ZWQgJiYgaXNDdXJyZW50LmN1cnJlbnQpIHtcbiAgICAgICAgc2V0U2hvd0xvYWRlcih0cnVlKTtcbiAgICAgICAgaXNNb3VudGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPExheW91dD5cbiAgICAgICAge3Nob3dMb2FkZXIgJiYgPFBhZ2VMb2FkZXIgLz59XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cbiAgICAgICAgICA8Rm9ybWlrXG4gICAgICAgICAgICBpbml0aWFsVmFsdWVzPXt7XG4gICAgICAgICAgICAgIGVtYWlsOiAnJyxcbiAgICAgICAgICAgICAgcGFzc3dvcmQ6ICcnXG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgdmFsaWRhdGlvblNjaGVtYT17TG9naW5TY2hlbWF9XG4gICAgICAgICAgICBvblN1Ym1pdD17YXN5bmMgdmFsdWVzID0+IHtcbiAgICAgICAgICAgICAgc2V0U3VibWl0KHRydWUpO1xuICAgICAgICAgICAgICBhd2FpdCBsb2dpbih2YWx1ZXMpO1xuICAgICAgICAgICAgICBzZXRTdWJtaXQoZmFsc2UpO1xuICAgICAgICAgICAgICBpZiAoIWVycm9yKSBpc0N1cnJlbnQuY3VycmVudCA9IHRydWU7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHsoeyBlcnJvcnMsIHRvdWNoZWQsIGhhbmRsZUNoYW5nZSwgaGFuZGxlU3VibWl0LCB2YWx1ZXMgfSkgPT4gKFxuICAgICAgICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fSBjbGFzc05hbWU9XCJhdXRoLWZvcm1cIj5cbiAgICAgICAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwicGFnZS1oZWFkaW5nXCI+IExvZ2luIDwvaDE+XG4gICAgICAgICAgICAgICAge2Vycm9yICYmIDxBbGVydCBtZXNzYWdlPXtlcnJvcn0gdHlwZT1cImVycm9yXCIgLz59XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncm91cFwiPlxuICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGlucHV0ICR7ZXJyb3JzLmVtYWlsICYmXG4gICAgICAgICAgICAgICAgICAgICAgdG91Y2hlZC5lbWFpbCAmJlxuICAgICAgICAgICAgICAgICAgICAgICdpbnB1dC1lcnJvcid9YH1cbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cImVtYWlsXCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbWFpbFwiXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJlbWFpbFwiXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZXMuZW1haWx9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAge2Vycm9ycy5lbWFpbCAmJiB0b3VjaGVkLmVtYWlsID8gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVycm9yXCI+e2Vycm9ycy5lbWFpbH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncm91cFwiPlxuICAgICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGlucHV0ICR7ZXJyb3JzLnBhc3N3b3JkICYmXG4gICAgICAgICAgICAgICAgICAgICAgdG91Y2hlZC5wYXNzd29yZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICdpbnB1dC1lcnJvcid9YH1cbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cInBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgICAgIG5hbWU9XCJwYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZXMucGFzc3dvcmR9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAge2Vycm9ycy5wYXNzd29yZCAmJiB0b3VjaGVkLnBhc3N3b3JkID8gKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImVycm9yXCI+e2Vycm9ycy5wYXNzd29yZH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JvdXBcIj5cbiAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzTmFtZT1cImJ0blwiIGRpc2FibGVkPXtzdWJtaXR9PlxuICAgICAgICAgICAgICAgICAgICB7c3VibWl0ID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxTcGlubmVyIHdpZHRoPXs0MH0gaGVpZ2h0PXs0MH0gY29sb3I9XCIjZmZmXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAnTG9naW4nXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJsaW5rXCI+XG4gICAgICAgICAgICAgICAgICBEb24ndCBoYXZlIGFuIGFjY291bnQ/eycgJ31cbiAgICAgICAgICAgICAgICAgIDxMaW5rIGhyZWY9XCIvc2lnbnVwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cImxpbmsgbGluay10ZXh0XCI+IENyZWF0ZSBhbiBhY2NvdW50LjwvYT5cbiAgICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9Gb3JtaWs+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9MYXlvdXQ+XG4gICAgICA8c3R5bGUganN4PlxuICAgICAgICB7YFxuICAgICAgICAgIC5jb250YWluZXIge1xuICAgICAgICAgICAgbWF4LXdpZHRoOiAxMjAwcHg7XG4gICAgICAgICAgICBtYXJnaW46IDJyZW0gYXV0bztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAucGFnZS1oZWFkaW5nIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogM3JlbTtcbiAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLmF1dGgtZm9ybSB7XG4gICAgICAgICAgICBwYWRkaW5nOiAycmVtIDA7XG4gICAgICAgICAgICB3aWR0aDogNTByZW07XG4gICAgICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7XG4gICAgICAgICAgICAuYXV0aC1mb3JtIHtcbiAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IDJyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLmF1dGgtZm9ybSAuaW5wdXQge1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBoZWlnaHQ6IDVyZW07XG4gICAgICAgICAgICBmb250LXNpemU6IDEuN3JlbTtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM2NjY7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLmF1dGgtZm9ybSAuaW5wdXQ6Zm9jdXMge1xuICAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLmdyb3VwIHtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDIuNXJlbTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAuYXV0aC1mb3JtIC5idG4ge1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBoZWlnaHQgNnJlbTtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLWRhcmspO1xuICAgICAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgICAgICBmb250LXNpemU6IDJyZW07XG4gICAgICAgICAgICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLWRhcmspO1xuICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC5saW5rIHtcbiAgICAgICAgICAgIG1hcmdpbi10b3A6IDFyZW07XG4gICAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItZGFyayk7XG4gICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgICAgICBmb250LXNpemU6IDEuN3JlbTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAubGluay10ZXh0IHtcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1wcmltYXJ5KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAuZXJyb3Ige1xuICAgICAgICAgICAgY29sb3I6IHJlZDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS42cmVtO1xuICAgICAgICAgICAgcGFkZGluZzogMC4ycmVtIDA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLmF1dGgtZm9ybSAuaW5wdXQtZXJyb3Ige1xuICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJlZDtcbiAgICAgICAgICB9XG4gICAgICAgIGB9XG4gICAgICA8L3N0eWxlPlxuICAgIDwvPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTG9naW47XG4iXX0= */\\n/*@ sourceURL=/home/russ/projects/dress-shop/pages/login.js */\"));\n};\n\nexport default Login;","map":{"version":3,"sources":["/home/russ/projects/dress-shop/pages/login.js"],"names":["React","useState","useEffect","useRef","Router","Formik","useAuth","Yup","Link","Layout","Spinner","Alert","PageLoader","set","LoginSchema","object","shape","password","string","required","min","email","Login","submit","setSubmit","showLoader","setShowLoader","error","login","clearError","isCurrent","isMounted","onRouteChangeStart","current","values","errors","touched","handleChange","handleSubmit"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAASC,MAAT,QAAuB,QAAvB;AACA,SAASC,OAAT,QAAwB,UAAxB;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,OAAP,MAAoB,qCAApB;AACA,OAAOC,KAAP,MAAkB,4BAAlB;AACA,OAAOC,UAAP,MAAuB,wCAAvB;AACA,SAASC,GAAT,QAAoB,UAApB;AAEA,IAAMC,WAAW,GAAGP,GAAG,CAACQ,MAAJ,GAAaC,KAAb,CAAmB;AACrCC,EAAAA,QAAQ,EAAEV,GAAG,CAACW,MAAJ,GACPC,QADO,CACE,sBADF,EAEPC,GAFO,CAEH,CAFG,CAD2B;AAIrCC,EAAAA,KAAK,EAAEd,GAAG,CAACW,MAAJ,GACJG,KADI,CACE,eADF,EAEJF,QAFI,CAEK,mBAFL;AAJ8B,CAAnB,CAApB;;AASA,IAAMG,KAAK,GAAG,SAARA,KAAQ,GAAM;AAAA,kBACUrB,QAAQ,CAAC,KAAD,CADlB;AAAA,MACXsB,MADW;AAAA,MACHC,SADG;;AAAA,mBAEkBvB,QAAQ,CAAC,KAAD,CAF1B;AAAA,MAEXwB,UAFW;AAAA,MAECC,aAFD;;AAAA,iBAGmBpB,OAAO,EAH1B;AAAA,MAGVqB,KAHU,YAGVA,KAHU;AAAA,MAGHC,KAHG,YAGHA,KAHG;AAAA,MAGIC,UAHJ,YAGIA,UAHJ;;AAIlB,MAAMC,SAAS,GAAG3B,MAAM,CAAC,KAAD,CAAxB;AAEAD,EAAAA,SAAS,CAAC,YAAM;AACd,WAAO;AAAA,aAAMyB,KAAK,IAAIE,UAAU,EAAzB;AAAA,KAAP;AACD,GAFQ,EAEN,CAACF,KAAD,CAFM,CAAT;AAIAzB,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI6B,SAAS,GAAG,KAAhB;;AACA3B,IAAAA,MAAM,CAAC4B,kBAAP,GAA4B,YAAM;AAChC,UAAI,CAACD,SAAD,IAAcD,SAAS,CAACG,OAA5B,EAAqC;AACnCP,QAAAA,aAAa,CAAC,IAAD,CAAb;AACAK,QAAAA,SAAS,GAAG,IAAZ;AACD;AACF,KALD;AAMD,GARQ,EAQN,EARM,CAAT;AAUA,SACE,4BACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGN,UAAU,IAAI,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADjB,EAGE;AAAA,wCAAe,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,aAAa,EAAE;AACbJ,MAAAA,KAAK,EAAE,EADM;AAEbJ,MAAAA,QAAQ,EAAE;AAFG,KADjB;AAKE,IAAA,gBAAgB,EAAEH,WALpB;AAME,IAAA,QAAQ,EAAE,iBAAMoB,MAAN;AAAA;AAAA;AAAA;AAAA;AACRV,cAAAA,SAAS,CAAC,IAAD,CAAT;AADQ;AAAA,+CAEFI,KAAK,CAACM,MAAD,CAFH;;AAAA;AAGRV,cAAAA,SAAS,CAAC,KAAD,CAAT;AACA,kBAAI,CAACG,KAAL,EAAYG,SAAS,CAACG,OAAV,GAAoB,IAApB;;AAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAaG;AAAA,QAAGE,MAAH,QAAGA,MAAH;AAAA,QAAWC,OAAX,QAAWA,OAAX;AAAA,QAAoBC,YAApB,QAAoBA,YAApB;AAAA,QAAkCC,YAAlC,QAAkCA,YAAlC;AAAA,QAAgDJ,MAAhD,QAAgDA,MAAhD;AAAA,WACC;AAAM,MAAA,QAAQ,EAAEI,YAAhB;AAAA,0CAAwC,WAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA,0CAAc,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,EAEGX,KAAK,IAAI,MAAC,KAAD;AAAO,MAAA,OAAO,EAAEA,KAAhB;AAAuB,MAAA,IAAI,EAAC,OAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFZ,EAGE;AAAA,0CAAe,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAIE,MAAA,IAAI,EAAC,OAJP;AAKE,MAAA,WAAW,EAAC,OALd;AAME,MAAA,IAAI,EAAC,OANP;AAOE,MAAA,KAAK,EAAEO,MAAM,CAACb,KAPhB;AAQE,MAAA,QAAQ,EAAEgB,YARZ;AAAA,0DACsBF,MAAM,CAACd,KAAP,IAClBe,OAAO,CAACf,KADU,IAElB,aAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAWGc,MAAM,CAACd,KAAP,IAAgBe,OAAO,CAACf,KAAxB,GACC;AAAA,0CAAe,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAwBc,MAAM,CAACd,KAA/B,CADD,GAEG,IAbN,CAHF,EAmBE;AAAA,0CAAe,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAIE,MAAA,IAAI,EAAC,UAJP;AAKE,MAAA,WAAW,EAAC,UALd;AAME,MAAA,IAAI,EAAC,UANP;AAOE,MAAA,KAAK,EAAEa,MAAM,CAACjB,QAPhB;AAQE,MAAA,QAAQ,EAAEoB,YARZ;AAAA,0DACsBF,MAAM,CAAClB,QAAP,IAClBmB,OAAO,CAACnB,QADU,IAElB,aAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAWGkB,MAAM,CAAClB,QAAP,IAAmBmB,OAAO,CAACnB,QAA3B,GACC;AAAA,0CAAe,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAwBkB,MAAM,CAAClB,QAA/B,CADD,GAEG,IAbN,CAnBF,EAkCE;AAAA,0CAAe,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAQ,MAAA,IAAI,EAAC,QAAb;AAAsC,MAAA,QAAQ,EAAEM,MAAhD;AAAA,0CAAgC,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGA,MAAM,GACL,MAAC,OAAD;AAAS,MAAA,KAAK,EAAE,EAAhB;AAAoB,MAAA,MAAM,EAAE,EAA5B;AAAgC,MAAA,KAAK,EAAC,MAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADK,GAGL,OAJJ,CADF,CAlCF,EA2CE;AAAA,0CAAgB,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCACyB,GADzB,EAEE,MAAC,IAAD;AAAM,MAAA,IAAI,EAAC,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA,0CAAa,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADF,CAFF,CA3CF,CADD;AAAA,GAbH,CADF,CAHF,CADF;AAAA;AAAA;AAAA,usSADF;AAsJD,CA1KD;;AA4KA,eAAeD,KAAf","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Router from 'next/router';\nimport { Formik } from 'formik';\nimport { useAuth } from '../store';\nimport * as Yup from 'yup';\nimport Link from 'next/link';\nimport Layout from '../components/Layout';\nimport Spinner from '../components/Shared/Loader/Spinner';\nimport Alert from '../components/Shared/Alert';\nimport PageLoader from '../components/Shared/Loader/PageLoader';\nimport { set } from 'mongoose';\n\nconst LoginSchema = Yup.object().shape({\n  password: Yup.string()\n    .required('Password is required')\n    .min(6),\n  email: Yup.string()\n    .email('Invalid email')\n    .required('Email is required')\n});\n\nconst Login = () => {\n  const [submit, setSubmit] = useState(false);\n  const [showLoader, setShowLoader] = useState(false);\n  const { error, login, clearError } = useAuth();\n  const isCurrent = useRef(false);\n\n  useEffect(() => {\n    return () => error && clearError();\n  }, [error]);\n\n  useEffect(() => {\n    let isMounted = false;\n    Router.onRouteChangeStart = () => {\n      if (!isMounted && isCurrent.current) {\n        setShowLoader(true);\n        isMounted = true;\n      }\n    };\n  }, []);\n\n  return (\n    <>\n      <Layout>\n        {showLoader && <PageLoader />}\n\n        <div className=\"container\">\n          <Formik\n            initialValues={{\n              email: '',\n              password: ''\n            }}\n            validationSchema={LoginSchema}\n            onSubmit={async values => {\n              setSubmit(true);\n              await login(values);\n              setSubmit(false);\n              if (!error) isCurrent.current = true;\n            }}\n          >\n            {({ errors, touched, handleChange, handleSubmit, values }) => (\n              <form onSubmit={handleSubmit} className=\"auth-form\">\n                <h1 className=\"page-heading\"> Login </h1>\n                {error && <Alert message={error} type=\"error\" />}\n                <div className=\"group\">\n                  <input\n                    className={`input ${errors.email &&\n                      touched.email &&\n                      'input-error'}`}\n                    type=\"email\"\n                    placeholder=\"Email\"\n                    name=\"email\"\n                    value={values.email}\n                    onChange={handleChange}\n                  />\n                  {errors.email && touched.email ? (\n                    <div className=\"error\">{errors.email}</div>\n                  ) : null}\n                </div>\n\n                <div className=\"group\">\n                  <input\n                    className={`input ${errors.password &&\n                      touched.password &&\n                      'input-error'}`}\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    name=\"password\"\n                    value={values.password}\n                    onChange={handleChange}\n                  />\n                  {errors.password && touched.password ? (\n                    <div className=\"error\">{errors.password}</div>\n                  ) : null}\n                </div>\n                <div className=\"group\">\n                  <button type=\"submit\" className=\"btn\" disabled={submit}>\n                    {submit ? (\n                      <Spinner width={40} height={40} color=\"#fff\" />\n                    ) : (\n                      'Login'\n                    )}\n                  </button>\n                </div>\n                <span className=\"link\">\n                  Don't have an account?{' '}\n                  <Link href=\"/signup\">\n                    <a className=\"link link-text\"> Create an account.</a>\n                  </Link>\n                </span>\n              </form>\n            )}\n          </Formik>\n        </div>\n      </Layout>\n      <style jsx>\n        {`\n          .container {\n            max-width: 1200px;\n            margin: 2rem auto;\n          }\n\n          .page-heading {\n            font-size: 3rem;\n            text-transform: uppercase;\n          }\n\n          .auth-form {\n            padding: 2rem 0;\n            width: 50rem;\n            margin: 0 auto;\n          }\n\n          @media only screen and (max-width: 600px) {\n            .auth-form {\n              width: 100%;\n              padding: 2rem;\n            }\n          }\n\n          .auth-form .input {\n            width: 100%;\n            height: 5rem;\n            font-size: 1.7rem;\n            border: 1px solid transparent;\n            border-bottom: 1px solid #666;\n          }\n\n          .auth-form .input:focus {\n             outline: none;\n          }\n\n          .group {\n            margin-top: 2.5rem;\n          }\n\n          .auth-form .btn {\n            width: 100%;\n            height 6rem;\n            background-color: var(--color-dark);\n            color: #fff;\n            font-size: 2rem;\n            font-family: inherit;\n            border: 1px solid var(--color-dark);\n            cursor: pointer;\n          }\n\n          .link {\n            margin-top: 1rem;\n            color: var(--color-dark);\n            display: inline-block;\n            font-size: 1.7rem;\n          }\n\n          .link-text {\n            color: var(--color-primary);\n          }\n\n          .error {\n            color: red;\n            font-size: 1.6rem;\n            padding: 0.2rem 0;\n          }\n\n          .auth-form .input-error {\n            border-bottom: 1px solid red;\n          }\n        `}\n      </style>\n    </>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}