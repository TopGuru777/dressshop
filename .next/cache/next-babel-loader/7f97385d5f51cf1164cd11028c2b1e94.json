{"ast":null,"code":"var _jsxFileName = \"/home/russ/projects/dress-shop/pages/search.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport Router, { useRouter } from 'next/router';\nimport axios from 'axios';\nimport Layout from '../components/Layout';\nimport ProductList from '../components/Shared/Products/ProductList';\nimport baseURL from '../utils/baseURL';\nimport SkeletonGrid from '../components/Shared/Loader/SkeletonGrid';\nimport TabCategory from '../components/Search/TabCategory';\nimport Filter from '../components/Search/Filter';\n\nconst Search = () => {\n  const {\n    0: products,\n    1: setProducts\n  } = useState([]);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(true);\n  const router = useRouter();\n  const {\n    category,\n    sort,\n    keyword\n  } = router.query;\n  useEffect(() => {\n    const getProducts = async () => {\n      try {\n        setIsLoading(true);\n        const payload = {\n          params: {\n            category,\n            sort,\n            keyword\n          }\n        };\n        const {\n          data\n        } = await axios.get(`${baseURL}/api/products`, payload);\n        setProducts(data.products);\n        setIsLoading(false);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    getProducts();\n  }, [category, sort, keyword]);\n\n  const handleTabChange = selected => {\n    if (keyword) {\n      if (sort) {\n        Router.push(`/search?category=${selected}&sort=${selected}&keyword=${keyword}`);\n      } else {\n        Router.push(`/search?category=${selected}&keyword=${keyword}`);\n      }\n    } else {\n      if (sort) {\n        Router.push(`/search?category=${selected}&sort=${sort}`);\n      } else {\n        Router.push(`/search?category=${selected}`);\n      }\n    }\n  };\n\n  const handleFilterChange = selected => {\n    if (keyword) {\n      Router.push(`/search?&sort=${selected}&keyword=${keyword}`);\n    } else {\n      Router.push(`/search?&sort=${selected}`);\n    }\n  };\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-4226036072\" + \" \" + \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-4226036072\" + \" \" + \"sort-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, __jsx(TabCategory, {\n    active: category,\n    onChangeTab: handleTabChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }), __jsx(Filter, {\n    handleChange: handleFilterChange,\n    active: sort,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  })), isLoading ? __jsx(SkeletonGrid, {\n    number: 20,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }) : __jsx(ProductList, {\n    products: products,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  })), __jsx(_JSXStyle, {\n    id: \"4226036072\",\n    __self: this\n  }, \".container.jsx-4226036072{max-width:120rem;margin:3rem auto;}.sort-container.jsx-4226036072{margin:4rem 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;background:rgba(0,0,0,0.03);padding:1rem;border-radius:4px;}@media only screen and (max-width:600px){.sort-container.jsx-4226036072{-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1c3MvcHJvamVjdHMvZHJlc3Mtc2hvcC9wYWdlcy9zZWFyY2guanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBc0VrQixBQUc0QixBQUtILEFBWVcsY0FYWixHQUxJLGlCQUNuQixzREFLaUIsV0FXZiw4Q0FWbUIsNkZBQ1csbUhBQ0MsNEJBQ2xCLGFBQ0ssa0JBQ3BCIiwiZmlsZSI6Ii9ob21lL3J1c3MvcHJvamVjdHMvZHJlc3Mtc2hvcC9wYWdlcy9zZWFyY2guanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSb3V0ZXIsIHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBMYXlvdXQgZnJvbSAnLi4vY29tcG9uZW50cy9MYXlvdXQnO1xuaW1wb3J0IFByb2R1Y3RMaXN0IGZyb20gJy4uL2NvbXBvbmVudHMvU2hhcmVkL1Byb2R1Y3RzL1Byb2R1Y3RMaXN0JztcbmltcG9ydCBiYXNlVVJMIGZyb20gJy4uL3V0aWxzL2Jhc2VVUkwnO1xuaW1wb3J0IFNrZWxldG9uR3JpZCBmcm9tICcuLi9jb21wb25lbnRzL1NoYXJlZC9Mb2FkZXIvU2tlbGV0b25HcmlkJztcbmltcG9ydCBUYWJDYXRlZ29yeSBmcm9tICcuLi9jb21wb25lbnRzL1NlYXJjaC9UYWJDYXRlZ29yeSc7XG5pbXBvcnQgRmlsdGVyIGZyb20gJy4uL2NvbXBvbmVudHMvU2VhcmNoL0ZpbHRlcic7XG5cbmNvbnN0IFNlYXJjaCA9ICgpID0+IHtcbiAgY29uc3QgW3Byb2R1Y3RzLCBzZXRQcm9kdWN0c10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IHsgY2F0ZWdvcnksIHNvcnQsIGtleXdvcmQgfSA9IHJvdXRlci5xdWVyeTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGdldFByb2R1Y3RzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xuICAgICAgICBjb25zdCBwYXlsb2FkID0geyBwYXJhbXM6IHsgY2F0ZWdvcnksIHNvcnQsIGtleXdvcmQgfSB9O1xuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldChgJHtiYXNlVVJMfS9hcGkvcHJvZHVjdHNgLCBwYXlsb2FkKTtcbiAgICAgICAgc2V0UHJvZHVjdHMoZGF0YS5wcm9kdWN0cyk7XG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICB9XG4gICAgfTtcbiAgICBnZXRQcm9kdWN0cygpO1xuICB9LCBbY2F0ZWdvcnksIHNvcnQsIGtleXdvcmRdKTtcblxuICBjb25zdCBoYW5kbGVUYWJDaGFuZ2UgPSBzZWxlY3RlZCA9PiB7XG4gICAgaWYgKGtleXdvcmQpIHtcbiAgICAgIGlmIChzb3J0KSB7XG4gICAgICAgIFJvdXRlci5wdXNoKFxuICAgICAgICAgIGAvc2VhcmNoP2NhdGVnb3J5PSR7c2VsZWN0ZWR9JnNvcnQ9JHtzZWxlY3RlZH0ma2V5d29yZD0ke2tleXdvcmR9YFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgUm91dGVyLnB1c2goYC9zZWFyY2g/Y2F0ZWdvcnk9JHtzZWxlY3RlZH0ma2V5d29yZD0ke2tleXdvcmR9YCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzb3J0KSB7XG4gICAgICAgIFJvdXRlci5wdXNoKGAvc2VhcmNoP2NhdGVnb3J5PSR7c2VsZWN0ZWR9JnNvcnQ9JHtzb3J0fWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgUm91dGVyLnB1c2goYC9zZWFyY2g/Y2F0ZWdvcnk9JHtzZWxlY3RlZH1gKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlRmlsdGVyQ2hhbmdlID0gc2VsZWN0ZWQgPT4ge1xuICAgIGlmIChrZXl3b3JkKSB7XG4gICAgICBSb3V0ZXIucHVzaChgL3NlYXJjaD8mc29ydD0ke3NlbGVjdGVkfSZrZXl3b3JkPSR7a2V5d29yZH1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgUm91dGVyLnB1c2goYC9zZWFyY2g/JnNvcnQ9JHtzZWxlY3RlZH1gKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzb3J0LWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxUYWJDYXRlZ29yeSBhY3RpdmU9e2NhdGVnb3J5fSBvbkNoYW5nZVRhYj17aGFuZGxlVGFiQ2hhbmdlfSAvPlxuICAgICAgICAgIDxGaWx0ZXIgaGFuZGxlQ2hhbmdlPXtoYW5kbGVGaWx0ZXJDaGFuZ2V9IGFjdGl2ZT17c29ydH0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtpc0xvYWRpbmcgPyAoXG4gICAgICAgICAgPFNrZWxldG9uR3JpZCBudW1iZXI9ezIwfSAvPlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxQcm9kdWN0TGlzdCBwcm9kdWN0cz17cHJvZHVjdHN9IC8+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLmNvbnRhaW5lciB7XG4gICAgICAgICAgbWF4LXdpZHRoOiAxMjByZW07XG4gICAgICAgICAgbWFyZ2luOiAzcmVtIGF1dG87XG4gICAgICAgIH1cblxuICAgICAgICAuc29ydC1jb250YWluZXIge1xuICAgICAgICAgIG1hcmdpbjogNHJlbSAwO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC13cmFwOiB3cmFwO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4wMyk7XG4gICAgICAgICAgcGFkZGluZzogMXJlbTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIH1cblxuICAgICAgICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7XG4gICAgICAgICAgLnNvcnQtY29udGFpbmVyIHtcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvTGF5b3V0PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2VhcmNoO1xuIl19 */\\n/*@ sourceURL=/home/russ/projects/dress-shop/pages/search.js */\"));\n};\n\nexport default Search;","map":{"version":3,"sources":["/home/russ/projects/dress-shop/pages/search.js"],"names":["React","useEffect","useState","Router","useRouter","axios","Layout","ProductList","baseURL","SkeletonGrid","TabCategory","Filter","Search","products","setProducts","isLoading","setIsLoading","router","category","sort","keyword","query","getProducts","payload","params","data","get","error","console","log","handleTabChange","selected","push","handleFilterChange"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Router, { useRouter } from 'next/router';\nimport axios from 'axios';\nimport Layout from '../components/Layout';\nimport ProductList from '../components/Shared/Products/ProductList';\nimport baseURL from '../utils/baseURL';\nimport SkeletonGrid from '../components/Shared/Loader/SkeletonGrid';\nimport TabCategory from '../components/Search/TabCategory';\nimport Filter from '../components/Search/Filter';\n\nconst Search = () => {\n  const [products, setProducts] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const router = useRouter();\n  const { category, sort, keyword } = router.query;\n\n  useEffect(() => {\n    const getProducts = async () => {\n      try {\n        setIsLoading(true);\n        const payload = { params: { category, sort, keyword } };\n        const { data } = await axios.get(`${baseURL}/api/products`, payload);\n        setProducts(data.products);\n        setIsLoading(false);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    getProducts();\n  }, [category, sort, keyword]);\n\n  const handleTabChange = selected => {\n    if (keyword) {\n      if (sort) {\n        Router.push(\n          `/search?category=${selected}&sort=${selected}&keyword=${keyword}`\n        );\n      } else {\n        Router.push(`/search?category=${selected}&keyword=${keyword}`);\n      }\n    } else {\n      if (sort) {\n        Router.push(`/search?category=${selected}&sort=${sort}`);\n      } else {\n        Router.push(`/search?category=${selected}`);\n      }\n    }\n  };\n\n  const handleFilterChange = selected => {\n    if (keyword) {\n      Router.push(`/search?&sort=${selected}&keyword=${keyword}`);\n    } else {\n      Router.push(`/search?&sort=${selected}`);\n    }\n  };\n\n  return (\n    <Layout>\n      <div className=\"container\">\n        <div className=\"sort-container\">\n          <TabCategory active={category} onChangeTab={handleTabChange} />\n          <Filter handleChange={handleFilterChange} active={sort} />\n        </div>\n        {isLoading ? (\n          <SkeletonGrid number={20} />\n        ) : (\n          <ProductList products={products} />\n        )}\n      </div>\n      <style jsx>{`\n        .container {\n          max-width: 120rem;\n          margin: 3rem auto;\n        }\n\n        .sort-container {\n          margin: 4rem 0;\n          display: flex;\n          flex-wrap: wrap;\n          align-items: center;\n          justify-content: space-between;\n          background: rgba(0, 0, 0, 0.03);\n          padding: 1rem;\n          border-radius: 4px;\n        }\n\n        @media only screen and (max-width: 600px) {\n          .sort-container {\n            justify-content: center;\n          }\n        }\n      `}</style>\n    </Layout>\n  );\n};\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}