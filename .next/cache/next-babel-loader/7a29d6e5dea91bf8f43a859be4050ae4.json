{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/russ/projects/dress-shop/pages/admin/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport Layout from '../../components/Layout';\nimport axios from 'axios';\nimport baseURL from '../../utils/baseURL';\nimport { MdAdd } from 'react-icons/md';\n\nconst Admin = () => {\n  const initState = {\n    name: '',\n    price: '',\n    description: '',\n    category: ''\n  };\n  const {\n    0: product,\n    1: setProduct\n  } = useState(initState);\n  const {\n    0: imagePreview,\n    1: setImagePreview\n  } = useState('');\n  const {\n    0: file,\n    1: setFile\n  } = useState('');\n\n  const handleChange = e => {\n    if (e.target.name === 'file') {\n      let reader = new FileReader();\n\n      reader.onloadend = () => {\n        setImagePreview(reader.result);\n      };\n\n      reader.readAsDataURL(event.target.files[0]);\n      setFile(e.target.files[0]);\n    } else {\n      setProduct(_objectSpread({}, product, {\n        [e.target.name]: e.target.value\n      }));\n    }\n  };\n\n  const imageUpload = async () => {\n    try {\n      let data = new FormData();\n      data.append('file', file);\n      data.append('upload_preset', 'dress-shop');\n      data.append('cloud_name', 'djlbfjouc'); //upload image to cloudinary\n\n      const res = await axios.post(process.env.CLOUDINARY_URL, data);\n      return res.data.secure_url;\n    } catch (error) {\n      console.log(error.response);\n    }\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      //get url of image\n      const imageURL = await imageUpload();\n\n      const payload = _objectSpread({}, product, {\n        imageURL\n      }); //save product to db\n\n\n      await axios.post(`${baseURL}/api/products`, payload);\n      reset();\n    } catch (error) {\n      console.log(error.response);\n    }\n  };\n\n  const reset = () => {\n    setProduct(initState);\n    setFile('');\n    setImagePreview('');\n  };\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-3199965195\" + \" \" + \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-3199965195\" + \" \" + \"page-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \" Add Product \"), __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"jsx-3199965195\" + \" \" + \"form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-3199965195\" + \" \" + \"group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    placeholder: \"Product Name\",\n    onChange: handleChange,\n    className: \"jsx-3199965195\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"jsx-3199965195\" + \" \" + \"group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-3199965195\" + \" \" + \"btn-upload-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    type: \"file\",\n    name: \"file\",\n    onChange: handleChange,\n    className: \"jsx-3199965195\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    className: \"jsx-3199965195\" + \" \" + \"btn-upload\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Upload Image\")), __jsx(\"div\", {\n    className: \"jsx-3199965195\" + \" \" + \"img-upload-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-3199965195\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, imagePreview ? __jsx(\"img\", {\n    src: imagePreview,\n    className: \"jsx-3199965195\" + \" \" + \"preview-img\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }) : __jsx(\"div\", {\n    className: \"jsx-3199965195\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \" Image goes here \")))), __jsx(\"div\", {\n    className: \"jsx-3199965195\" + \" \" + \"group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"price\",\n    placeholder: \"Product Price\",\n    onChange: handleChange,\n    className: \"jsx-3199965195\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"jsx-3199965195\" + \" \" + \"group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"description\",\n    placeholder: \"Product Description\",\n    onChange: handleChange,\n    className: \"jsx-3199965195\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"jsx-3199965195\" + \" \" + \"group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, __jsx(\"select\", {\n    name: \"category\",\n    id: \"\",\n    onChange: handleChange,\n    className: \"jsx-3199965195\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, __jsx(\"option\", {\n    value: \"men\",\n    className: \"jsx-3199965195\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, \"Men\"), __jsx(\"option\", {\n    value: \"women\",\n    className: \"jsx-3199965195\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, \"Women\"))), __jsx(\"div\", {\n    className: \"jsx-3199965195\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, __jsx(\"button\", {\n    className: \"jsx-3199965195\" + \" \" + \"btn-submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, \"Submit\")))), ' ', __jsx(_JSXStyle, {\n    id: \"3199965195\",\n    __self: this\n  }, \".container.jsx-3199965195{max-width:120rem;margin:3rem auto;}.page-title.jsx-3199965195{font-size:3rem;}.preview-img.jsx-3199965195{width:100%;height:100%;}.form.jsx-3199965195{max-width:60rem;}.form.jsx-3199965195 input.jsx-3199965195{border:1px solid transparent;border-bottom:1px solid var(--color-dark);width:100%;height:5rem;font-size:1.6rem;}.form.jsx-3199965195 select.jsx-3199965195{border:1px solid var(--color-dark);width:100%;height:5rem;font-size:1.6rem;}.group.jsx-3199965195{padding:1rem 0;margin-bottom:1rem;}.btn-submit.jsx-3199965195{height:6rem;width:100%;background-color:var(--color-dark);color:#fff;font-size:2rem;border:1px solid transparent;}.img-upload-container.jsx-3199965195{position:relative;width:20rem;height:20rem;border:1px solid #eee;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;font-size:1rem;}.btn-upload-container.jsx-3199965195 input.jsx-3199965195{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;}.btn-upload-container.jsx-3199965195{position:relative;width:20rem;height:5rem;margin-bottom:2rem;}.btn-upload.jsx-3199965195{background-color:var(--color-dark);border:1px solid transparent;color:#fff;font-size:1.7rem;border-radius:6px;width:100%;height:100%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1c3MvcHJvamVjdHMvZHJlc3Mtc2hvcC9wYWdlcy9hZG1pbi9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUErSGtCLEFBRzRCLEFBSUYsQUFJSixBQUtLLEFBSWEsQUFRTSxBQU9wQixBQUtILEFBU00sQUFXUixBQVNRLEFBT2lCLFVBZmpCLENBakROLENBNkJELEdBakNiLEFBNEJxQixDQW5CckIsQ0FibUIsQ0E4Q0wsQUFvQkEsS0F6RGQsQUE2QnFDLEtBb0I3QixDQXpDb0MsQ0E4QjdCLEFBb0JELElBbEVkLEFBZ0NBLEFBMEJTLENBbENJLEFBZ0RrQixNQWJsQixDQVFRLENBcEJHLEdBdEJWLE1BbUNBLE1BbENLLEFBWU4sR0E4QmIsR0FQQSxBQVlhLENBekJFLElBVEUsRUF0QkosSUFVYixBQStDbUIsT0F4REwsRUFzQmlCLFFBbUNYLEVBeERELGdCQXlETixDQXhEYixFQXFCQSxRQW9DYyxZQUNkLE1BN0JxQiw2RkFDSSxtR0FDUixlQUNqQiIsImZpbGUiOiIvaG9tZS9ydXNzL3Byb2plY3RzL2RyZXNzLXNob3AvcGFnZXMvYWRtaW4vaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgTGF5b3V0IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvTGF5b3V0JztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgYmFzZVVSTCBmcm9tICcuLi8uLi91dGlscy9iYXNlVVJMJztcbmltcG9ydCB7IE1kQWRkIH0gZnJvbSAncmVhY3QtaWNvbnMvbWQnO1xuXG5jb25zdCBBZG1pbiA9ICgpID0+IHtcbiAgY29uc3QgaW5pdFN0YXRlID0ge1xuICAgIG5hbWU6ICcnLFxuICAgIHByaWNlOiAnJyxcbiAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgY2F0ZWdvcnk6ICcnXG4gIH07XG5cbiAgY29uc3QgW3Byb2R1Y3QsIHNldFByb2R1Y3RdID0gdXNlU3RhdGUoaW5pdFN0YXRlKTtcblxuICBjb25zdCBbaW1hZ2VQcmV2aWV3LCBzZXRJbWFnZVByZXZpZXddID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbZmlsZSwgc2V0RmlsZV0gPSB1c2VTdGF0ZSgnJyk7XG5cbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gZSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0Lm5hbWUgPT09ICdmaWxlJykge1xuICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICByZWFkZXIub25sb2FkZW5kID0gKCkgPT4ge1xuICAgICAgICBzZXRJbWFnZVByZXZpZXcocmVhZGVyLnJlc3VsdCk7XG4gICAgICB9O1xuICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZXZlbnQudGFyZ2V0LmZpbGVzWzBdKTtcbiAgICAgIHNldEZpbGUoZS50YXJnZXQuZmlsZXNbMF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRQcm9kdWN0KHtcbiAgICAgICAgLi4ucHJvZHVjdCxcbiAgICAgICAgW2UudGFyZ2V0Lm5hbWVdOiBlLnRhcmdldC52YWx1ZVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGltYWdlVXBsb2FkID0gYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBsZXQgZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgZGF0YS5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcbiAgICAgIGRhdGEuYXBwZW5kKCd1cGxvYWRfcHJlc2V0JywgJ2RyZXNzLXNob3AnKTtcbiAgICAgIGRhdGEuYXBwZW5kKCdjbG91ZF9uYW1lJywgJ2RqbGJmam91YycpO1xuICAgICAgLy91cGxvYWQgaW1hZ2UgdG8gY2xvdWRpbmFyeVxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXhpb3MucG9zdChwcm9jZXNzLmVudi5DTE9VRElOQVJZX1VSTCwgZGF0YSk7XG4gICAgICByZXR1cm4gcmVzLmRhdGEuc2VjdXJlX3VybDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdHJ5IHtcbiAgICAgIC8vZ2V0IHVybCBvZiBpbWFnZVxuICAgICAgY29uc3QgaW1hZ2VVUkwgPSBhd2FpdCBpbWFnZVVwbG9hZCgpO1xuICAgICAgY29uc3QgcGF5bG9hZCA9IHsgLi4ucHJvZHVjdCwgaW1hZ2VVUkwgfTtcbiAgICAgIC8vc2F2ZSBwcm9kdWN0IHRvIGRiXG4gICAgICBhd2FpdCBheGlvcy5wb3N0KGAke2Jhc2VVUkx9L2FwaS9wcm9kdWN0c2AsIHBheWxvYWQpO1xuICAgICAgcmVzZXQoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCByZXNldCA9ICgpID0+IHtcbiAgICBzZXRQcm9kdWN0KGluaXRTdGF0ZSk7XG4gICAgc2V0RmlsZSgnJyk7XG4gICAgc2V0SW1hZ2VQcmV2aWV3KCcnKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxMYXlvdXQ+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZ2UtdGl0bGVcIj4gQWRkIFByb2R1Y3QgPC9kaXY+XG4gICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IGNsYXNzTmFtZT1cImZvcm1cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyb3VwXCI+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICBuYW1lPVwibmFtZVwiXG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiUHJvZHVjdCBOYW1lXCJcbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncm91cFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJidG4tdXBsb2FkLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImZpbGVcIiBuYW1lPVwiZmlsZVwiIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9IC8+XG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuLXVwbG9hZFwiPlVwbG9hZCBJbWFnZTwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaW1nLXVwbG9hZC1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICB7aW1hZ2VQcmV2aWV3ID8gKFxuICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz17aW1hZ2VQcmV2aWV3fSBjbGFzc05hbWU9XCJwcmV2aWV3LWltZ1wiIC8+XG4gICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2PiBJbWFnZSBnb2VzIGhlcmUgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyb3VwXCI+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICBuYW1lPVwicHJpY2VcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlByb2R1Y3QgUHJpY2VcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyb3VwXCI+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICBuYW1lPVwiZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlByb2R1Y3QgRGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyb3VwXCI+XG4gICAgICAgICAgICA8c2VsZWN0IG5hbWU9XCJjYXRlZ29yeVwiIGlkPVwiXCIgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX0+XG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJtZW5cIj5NZW48L29wdGlvbj5cbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIndvbWVuXCI+V29tZW48L29wdGlvbj5cbiAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0bi1zdWJtaXRcIj5TdWJtaXQ8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgPC9kaXY+eycgJ31cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLmNvbnRhaW5lciB7XG4gICAgICAgICAgbWF4LXdpZHRoOiAxMjByZW07XG4gICAgICAgICAgbWFyZ2luOiAzcmVtIGF1dG87XG4gICAgICAgIH1cbiAgICAgICAgLnBhZ2UtdGl0bGUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogM3JlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wcmV2aWV3LWltZyB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICB9XG5cbiAgICAgICAgLmZvcm0ge1xuICAgICAgICAgIG1heC13aWR0aDogNjByZW07XG4gICAgICAgIH1cblxuICAgICAgICAuZm9ybSBpbnB1dCB7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWNvbG9yLWRhcmspO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGhlaWdodDogNXJlbTtcbiAgICAgICAgICBmb250LXNpemU6IDEuNnJlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5mb3JtIHNlbGVjdCB7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tY29sb3ItZGFyayk7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgaGVpZ2h0OiA1cmVtO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMS42cmVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLmdyb3VwIHtcbiAgICAgICAgICBwYWRkaW5nOiAxcmVtIDA7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMXJlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5idG4tc3VibWl0IHtcbiAgICAgICAgICBoZWlnaHQ6IDZyZW07XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItZGFyayk7XG4gICAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgICAgZm9udC1zaXplOiAycmVtO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHRyYW5zcGFyZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgLmltZy11cGxvYWQtY29udGFpbmVyIHtcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgd2lkdGg6IDIwcmVtO1xuICAgICAgICAgIGhlaWdodDogMjByZW07XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2VlZTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgZm9udC1zaXplOiAxcmVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLmJ0bi11cGxvYWQtY29udGFpbmVyIGlucHV0IHtcbiAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIH1cblxuICAgICAgICAuYnRuLXVwbG9hZC1jb250YWluZXIge1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICB3aWR0aDogMjByZW07XG4gICAgICAgICAgaGVpZ2h0OiA1cmVtO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDJyZW07XG4gICAgICAgIH1cblxuICAgICAgICAuYnRuLXVwbG9hZCB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItZGFyayk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgICAgZm9udC1zaXplOiAxLjdyZW07XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPnsnICd9XG4gICAgPC9MYXlvdXQ+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBZG1pbjtcbiJdfQ== */\\n/*@ sourceURL=/home/russ/projects/dress-shop/pages/admin/index.js */\"), ' ');\n};\n\nexport default Admin;","map":{"version":3,"sources":["/home/russ/projects/dress-shop/pages/admin/index.js"],"names":["React","useState","Layout","axios","baseURL","MdAdd","Admin","initState","name","price","description","category","product","setProduct","imagePreview","setImagePreview","file","setFile","handleChange","e","target","reader","FileReader","onloadend","result","readAsDataURL","event","files","value","imageUpload","data","FormData","append","res","post","process","env","CLOUDINARY_URL","secure_url","error","console","log","response","handleSubmit","preventDefault","imageURL","payload","reset"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Layout from '../../components/Layout';\nimport axios from 'axios';\nimport baseURL from '../../utils/baseURL';\nimport { MdAdd } from 'react-icons/md';\n\nconst Admin = () => {\n  const initState = {\n    name: '',\n    price: '',\n    description: '',\n    category: ''\n  };\n\n  const [product, setProduct] = useState(initState);\n\n  const [imagePreview, setImagePreview] = useState('');\n  const [file, setFile] = useState('');\n\n  const handleChange = e => {\n    if (e.target.name === 'file') {\n      let reader = new FileReader();\n      reader.onloadend = () => {\n        setImagePreview(reader.result);\n      };\n      reader.readAsDataURL(event.target.files[0]);\n      setFile(e.target.files[0]);\n    } else {\n      setProduct({\n        ...product,\n        [e.target.name]: e.target.value\n      });\n    }\n  };\n\n  const imageUpload = async () => {\n    try {\n      let data = new FormData();\n      data.append('file', file);\n      data.append('upload_preset', 'dress-shop');\n      data.append('cloud_name', 'djlbfjouc');\n      //upload image to cloudinary\n      const res = await axios.post(process.env.CLOUDINARY_URL, data);\n      return res.data.secure_url;\n    } catch (error) {\n      console.log(error.response);\n    }\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      //get url of image\n      const imageURL = await imageUpload();\n      const payload = { ...product, imageURL };\n      //save product to db\n      await axios.post(`${baseURL}/api/products`, payload);\n      reset();\n    } catch (error) {\n      console.log(error.response);\n    }\n  };\n\n  const reset = () => {\n    setProduct(initState);\n    setFile('');\n    setImagePreview('');\n  };\n\n  return (\n    <Layout>\n      <div className=\"container\">\n        <div className=\"page-title\"> Add Product </div>\n        <form onSubmit={handleSubmit} className=\"form\">\n          <div className=\"group\">\n            <input\n              type=\"text\"\n              name=\"name\"\n              placeholder=\"Product Name\"\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"group\">\n            <div className=\"btn-upload-container\">\n              <input type=\"file\" name=\"file\" onChange={handleChange} />\n              <button className=\"btn-upload\">Upload Image</button>\n            </div>\n\n            <div className=\"img-upload-container\">\n              {\n                <div>\n                  {imagePreview ? (\n                    <img src={imagePreview} className=\"preview-img\" />\n                  ) : (\n                    <div> Image goes here </div>\n                  )}\n                </div>\n              }\n            </div>\n          </div>\n          <div className=\"group\">\n            <input\n              type=\"text\"\n              name=\"price\"\n              placeholder=\"Product Price\"\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"group\">\n            <input\n              type=\"text\"\n              name=\"description\"\n              placeholder=\"Product Description\"\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"group\">\n            <select name=\"category\" id=\"\" onChange={handleChange}>\n              <option value=\"men\">Men</option>\n              <option value=\"women\">Women</option>\n            </select>\n          </div>\n          <div>\n            <button className=\"btn-submit\">Submit</button>\n          </div>\n        </form>\n      </div>{' '}\n      <style jsx>{`\n        .container {\n          max-width: 120rem;\n          margin: 3rem auto;\n        }\n        .page-title {\n          font-size: 3rem;\n        }\n\n        .preview-img {\n          width: 100%;\n          height: 100%;\n        }\n\n        .form {\n          max-width: 60rem;\n        }\n\n        .form input {\n          border: 1px solid transparent;\n          border-bottom: 1px solid var(--color-dark);\n          width: 100%;\n          height: 5rem;\n          font-size: 1.6rem;\n        }\n\n        .form select {\n          border: 1px solid var(--color-dark);\n          width: 100%;\n          height: 5rem;\n          font-size: 1.6rem;\n        }\n\n        .group {\n          padding: 1rem 0;\n          margin-bottom: 1rem;\n        }\n\n        .btn-submit {\n          height: 6rem;\n          width: 100%;\n          background-color: var(--color-dark);\n          color: #fff;\n          font-size: 2rem;\n          border: 1px solid transparent;\n        }\n\n        .img-upload-container {\n          position: relative;\n          width: 20rem;\n          height: 20rem;\n          border: 1px solid #eee;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 1rem;\n        }\n\n        .btn-upload-container input {\n          opacity: 0;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n        }\n\n        .btn-upload-container {\n          position: relative;\n          width: 20rem;\n          height: 5rem;\n          margin-bottom: 2rem;\n        }\n\n        .btn-upload {\n          background-color: var(--color-dark);\n          border: 1px solid transparent;\n          color: #fff;\n          font-size: 1.7rem;\n          border-radius: 6px;\n          width: 100%;\n          height: 100%;\n        }\n      `}</style>{' '}\n    </Layout>\n  );\n};\n\nexport default Admin;\n"]},"metadata":{},"sourceType":"module"}