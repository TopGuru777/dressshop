{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport upload from '../../middlewares/upload-image';\nimport uuid from 'uuid/v4';\n\nconst uploadToS3 = (req, res) => {\n  req.s3Key = uuid();\n  const imageURL = `https://dress-shop.s3-ap-southeast-1.amazonaws.com/${req.s3Key}`;\n  return new _Promise((resolve, reject) => {\n    return req.upload(req, res, err => {\n      console.log(req.body);\n    });\n  });\n};\n\nconst handle = async (req, res) => {\n  uploadToS3(req, res);\n  res.send('test');\n};\n\nexport default upload(handle);","map":{"version":3,"sources":["/home/russ/projects/dress-shop/pages/api/upload.js"],"names":["upload","uuid","uploadToS3","req","res","s3Key","imageURL","resolve","reject","err","console","log","body","handle","send"],"mappings":";AAAA,OAAOA,MAAP,MAAmB,gCAAnB;AACA,OAAOC,IAAP,MAAiB,SAAjB;;AAEA,MAAMC,UAAU,GAAG,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC/BD,EAAAA,GAAG,CAACE,KAAJ,GAAYJ,IAAI,EAAhB;AACA,QAAMK,QAAQ,GAAI,sDAAqDH,GAAG,CAACE,KAAM,EAAjF;AACA,SAAO,aAAY,CAACE,OAAD,EAAUC,MAAV,KAAqB;AACtC,WAAOL,GAAG,CAACH,MAAJ,CAAWG,GAAX,EAAgBC,GAAhB,EAAqBK,GAAG,IAAI;AACjCC,MAAAA,OAAO,CAACC,GAAR,CAAYR,GAAG,CAACS,IAAhB;AACD,KAFM,CAAP;AAGD,GAJM,CAAP;AAKD,CARD;;AAUA,MAAMC,MAAM,GAAG,OAAOV,GAAP,EAAYC,GAAZ,KAAoB;AACjCF,EAAAA,UAAU,CAACC,GAAD,EAAMC,GAAN,CAAV;AACAA,EAAAA,GAAG,CAACU,IAAJ,CAAS,MAAT;AACD,CAHD;;AAKA,eAAed,MAAM,CAACa,MAAD,CAArB","sourcesContent":["import upload from '../../middlewares/upload-image';\nimport uuid from 'uuid/v4';\n\nconst uploadToS3 = (req, res) => {\n  req.s3Key = uuid();\n  const imageURL = `https://dress-shop.s3-ap-southeast-1.amazonaws.com/${req.s3Key}`;\n  return new Promise((resolve, reject) => {\n    return req.upload(req, res, err => {\n      console.log(req.body);\n    });\n  });\n};\n\nconst handle = async (req, res) => {\n  uploadToS3(req, res);\n  res.send('test');\n};\n\nexport default upload(handle);\n"]},"metadata":{},"sourceType":"module"}