{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar _jsxFileName = \"/home/russ/projects/dress-shop/pages/search.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport Router, { useRouter } from 'next/router';\nimport axios from 'axios';\nimport Layout from '../components/Layout';\nimport ProductList from '../components/Shared/Products/ProductList';\nimport baseURL from '../utils/baseURL';\nimport SkeletonGrid from '../components/Shared/Loader/SkeletonGrid';\nimport TabCategory from '../components/Search/TabCategory';\nimport Filter from '../components/Search/Filter';\n\nvar Search = function Search() {\n  var _useState = useState([]),\n      products = _useState[0],\n      setProducts = _useState[1];\n\n  var _useState2 = useState(true),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var router = useRouter();\n  var _router$query = router.query,\n      category = _router$query.category,\n      sortByPrice = _router$query.sortByPrice,\n      keyword = _router$query.keyword;\n  useEffect(function () {\n    var getProducts = function getProducts() {\n      var payload, _ref, data;\n\n      return _regeneratorRuntime.async(function getProducts$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              setIsLoading(true);\n              payload = {\n                params: {\n                  category: category,\n                  price: sortByPrice,\n                  keyword: keyword\n                }\n              };\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(axios.get(\"\".concat(baseURL, \"/api/search\"), payload));\n\n            case 5:\n              _ref = _context.sent;\n              data = _ref.data;\n              setProducts(data.products);\n              setIsLoading(false);\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 11]]);\n    };\n\n    getProducts();\n  }, [category, sortByPrice, keyword]);\n\n  var handleTabChange = function handleTabChange(selected) {\n    if (keyword) {\n      if (sortByPrice) {\n        Router.push(\"/category?category=\".concat(selected, \"&sortByPrice=\").concat(sortByPrice, \"&keyword=\").concat(keyword));\n      } else {\n        Router.push(\"/category?category=\".concat(selected, \"&keyword=\").concat(keyword));\n      }\n    } else {\n      if (sortByPrice) {\n        Router.push(\"/category?category=\".concat(selected, \"&sortByPrice=\").concat(sortByPrice));\n      } else {\n        Router.push(\"/category?category=\".concat(selected));\n      }\n    }\n  };\n\n  var handleFilterChange = function handleFilterChange(selected) {\n    if (keyword) {\n      Router.push(\"/category?category=\".concat(category, \"&sortByPrice=\").concat(selected, \"&keyword=\").concat(keyword));\n    } else {\n      Router.push(\"/category?category=\".concat(category, \"&sortByPrice=\").concat(selected));\n    }\n  };\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-4199702679\" + \" \" + \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-4199702679\" + \" \" + \"sort-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, __jsx(TabCategory, {\n    active: category,\n    onChangeTab: handleTabChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), __jsx(Filter, {\n    handleChange: handleFilterChange,\n    active: sortByPrice,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  })), isLoading ? __jsx(SkeletonGrid, {\n    number: 20,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }) : __jsx(ProductList, {\n    products: products,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  })), __jsx(_JSXStyle, {\n    id: \"4199702679\",\n    __self: this\n  }, \".container.jsx-4199702679{max-width:120rem;margin:3rem auto;}.sort-container.jsx-4199702679{margin:4rem 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;background:rgba(0,0,0,0.03);padding:1rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1c3MvcHJvamVjdHMvZHJlc3Mtc2hvcC9wYWdlcy9zZWFyY2guanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMEVrQixBQUc0QixBQUtILGNBQ0QsR0FMSSxpQkFDbkIsc0RBS3FCLDZGQUNXLG1IQUNDLDRCQUNsQixhQUNmIiwiZmlsZSI6Ii9ob21lL3J1c3MvcHJvamVjdHMvZHJlc3Mtc2hvcC9wYWdlcy9zZWFyY2guanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSb3V0ZXIsIHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9yb3V0ZXInO1xuaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBMYXlvdXQgZnJvbSAnLi4vY29tcG9uZW50cy9MYXlvdXQnO1xuaW1wb3J0IFByb2R1Y3RMaXN0IGZyb20gJy4uL2NvbXBvbmVudHMvU2hhcmVkL1Byb2R1Y3RzL1Byb2R1Y3RMaXN0JztcbmltcG9ydCBiYXNlVVJMIGZyb20gJy4uL3V0aWxzL2Jhc2VVUkwnO1xuaW1wb3J0IFNrZWxldG9uR3JpZCBmcm9tICcuLi9jb21wb25lbnRzL1NoYXJlZC9Mb2FkZXIvU2tlbGV0b25HcmlkJztcbmltcG9ydCBUYWJDYXRlZ29yeSBmcm9tICcuLi9jb21wb25lbnRzL1NlYXJjaC9UYWJDYXRlZ29yeSc7XG5pbXBvcnQgRmlsdGVyIGZyb20gJy4uL2NvbXBvbmVudHMvU2VhcmNoL0ZpbHRlcic7XG5cbmNvbnN0IFNlYXJjaCA9ICgpID0+IHtcbiAgY29uc3QgW3Byb2R1Y3RzLCBzZXRQcm9kdWN0c10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IHsgY2F0ZWdvcnksIHNvcnRCeVByaWNlLCBrZXl3b3JkIH0gPSByb3V0ZXIucXVlcnk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBnZXRQcm9kdWN0cyA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNldElzTG9hZGluZyh0cnVlKTtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHsgcGFyYW1zOiB7IGNhdGVnb3J5LCBwcmljZTogc29ydEJ5UHJpY2UsIGtleXdvcmQgfSB9O1xuICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGF4aW9zLmdldChgJHtiYXNlVVJMfS9hcGkvc2VhcmNoYCwgcGF5bG9hZCk7XG4gICAgICAgIHNldFByb2R1Y3RzKGRhdGEucHJvZHVjdHMpO1xuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgfVxuICAgIH07XG4gICAgZ2V0UHJvZHVjdHMoKTtcbiAgfSwgW2NhdGVnb3J5LCBzb3J0QnlQcmljZSwga2V5d29yZF0pO1xuXG4gIGNvbnN0IGhhbmRsZVRhYkNoYW5nZSA9IHNlbGVjdGVkID0+IHtcbiAgICBpZiAoa2V5d29yZCkge1xuICAgICAgaWYgKHNvcnRCeVByaWNlKSB7XG4gICAgICAgIFJvdXRlci5wdXNoKFxuICAgICAgICAgIGAvY2F0ZWdvcnk/Y2F0ZWdvcnk9JHtzZWxlY3RlZH0mc29ydEJ5UHJpY2U9JHtzb3J0QnlQcmljZX0ma2V5d29yZD0ke2tleXdvcmR9YFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgUm91dGVyLnB1c2goYC9jYXRlZ29yeT9jYXRlZ29yeT0ke3NlbGVjdGVkfSZrZXl3b3JkPSR7a2V5d29yZH1gKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHNvcnRCeVByaWNlKSB7XG4gICAgICAgIFJvdXRlci5wdXNoKFxuICAgICAgICAgIGAvY2F0ZWdvcnk/Y2F0ZWdvcnk9JHtzZWxlY3RlZH0mc29ydEJ5UHJpY2U9JHtzb3J0QnlQcmljZX1gXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBSb3V0ZXIucHVzaChgL2NhdGVnb3J5P2NhdGVnb3J5PSR7c2VsZWN0ZWR9YCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUZpbHRlckNoYW5nZSA9IHNlbGVjdGVkID0+IHtcbiAgICBpZiAoa2V5d29yZCkge1xuICAgICAgUm91dGVyLnB1c2goXG4gICAgICAgIGAvY2F0ZWdvcnk/Y2F0ZWdvcnk9JHtjYXRlZ29yeX0mc29ydEJ5UHJpY2U9JHtzZWxlY3RlZH0ma2V5d29yZD0ke2tleXdvcmR9YFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgUm91dGVyLnB1c2goYC9jYXRlZ29yeT9jYXRlZ29yeT0ke2NhdGVnb3J5fSZzb3J0QnlQcmljZT0ke3NlbGVjdGVkfWApO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxMYXlvdXQ+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNvcnQtY29udGFpbmVyXCI+XG4gICAgICAgICAgPFRhYkNhdGVnb3J5IGFjdGl2ZT17Y2F0ZWdvcnl9IG9uQ2hhbmdlVGFiPXtoYW5kbGVUYWJDaGFuZ2V9IC8+XG4gICAgICAgICAgPEZpbHRlciBoYW5kbGVDaGFuZ2U9e2hhbmRsZUZpbHRlckNoYW5nZX0gYWN0aXZlPXtzb3J0QnlQcmljZX0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtpc0xvYWRpbmcgPyAoXG4gICAgICAgICAgPFNrZWxldG9uR3JpZCBudW1iZXI9ezIwfSAvPlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxQcm9kdWN0TGlzdCBwcm9kdWN0cz17cHJvZHVjdHN9IC8+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLmNvbnRhaW5lciB7XG4gICAgICAgICAgbWF4LXdpZHRoOiAxMjByZW07XG4gICAgICAgICAgbWFyZ2luOiAzcmVtIGF1dG87XG4gICAgICAgIH1cblxuICAgICAgICAuc29ydC1jb250YWluZXIge1xuICAgICAgICAgIG1hcmdpbjogNHJlbSAwO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjAzKTtcbiAgICAgICAgICBwYWRkaW5nOiAxcmVtO1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9MYXlvdXQ+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTZWFyY2g7XG4iXX0= */\\n/*@ sourceURL=/home/russ/projects/dress-shop/pages/search.js */\"));\n};\n\nexport default Search;","map":{"version":3,"sources":["/home/russ/projects/dress-shop/pages/search.js"],"names":["React","useEffect","useState","Router","useRouter","axios","Layout","ProductList","baseURL","SkeletonGrid","TabCategory","Filter","Search","products","setProducts","isLoading","setIsLoading","router","query","category","sortByPrice","keyword","getProducts","payload","params","price","get","data","console","log","handleTabChange","selected","push","handleFilterChange"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Router, { useRouter } from 'next/router';\nimport axios from 'axios';\nimport Layout from '../components/Layout';\nimport ProductList from '../components/Shared/Products/ProductList';\nimport baseURL from '../utils/baseURL';\nimport SkeletonGrid from '../components/Shared/Loader/SkeletonGrid';\nimport TabCategory from '../components/Search/TabCategory';\nimport Filter from '../components/Search/Filter';\n\nconst Search = () => {\n  const [products, setProducts] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const router = useRouter();\n  const { category, sortByPrice, keyword } = router.query;\n\n  useEffect(() => {\n    const getProducts = async () => {\n      try {\n        setIsLoading(true);\n        const payload = { params: { category, price: sortByPrice, keyword } };\n        const { data } = await axios.get(`${baseURL}/api/search`, payload);\n        setProducts(data.products);\n        setIsLoading(false);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    getProducts();\n  }, [category, sortByPrice, keyword]);\n\n  const handleTabChange = selected => {\n    if (keyword) {\n      if (sortByPrice) {\n        Router.push(\n          `/category?category=${selected}&sortByPrice=${sortByPrice}&keyword=${keyword}`\n        );\n      } else {\n        Router.push(`/category?category=${selected}&keyword=${keyword}`);\n      }\n    } else {\n      if (sortByPrice) {\n        Router.push(\n          `/category?category=${selected}&sortByPrice=${sortByPrice}`\n        );\n      } else {\n        Router.push(`/category?category=${selected}`);\n      }\n    }\n  };\n\n  const handleFilterChange = selected => {\n    if (keyword) {\n      Router.push(\n        `/category?category=${category}&sortByPrice=${selected}&keyword=${keyword}`\n      );\n    } else {\n      Router.push(`/category?category=${category}&sortByPrice=${selected}`);\n    }\n  };\n\n  return (\n    <Layout>\n      <div className=\"container\">\n        <div className=\"sort-container\">\n          <TabCategory active={category} onChangeTab={handleTabChange} />\n          <Filter handleChange={handleFilterChange} active={sortByPrice} />\n        </div>\n        {isLoading ? (\n          <SkeletonGrid number={20} />\n        ) : (\n          <ProductList products={products} />\n        )}\n      </div>\n      <style jsx>{`\n        .container {\n          max-width: 120rem;\n          margin: 3rem auto;\n        }\n\n        .sort-container {\n          margin: 4rem 0;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          background: rgba(0, 0, 0, 0.03);\n          padding: 1rem;\n        }\n      `}</style>\n    </Layout>\n  );\n};\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}