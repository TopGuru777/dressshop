{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar _jsxFileName = \"/home/russ/projects/dress-shop/pages/cart.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from \"react\";\nimport Layout from \"../components/Layout\";\nimport { useAuth } from \"../store/auth/auth.context\";\nimport { useCart } from \"../store/cart/cart.context\";\nimport cookie from \"js-cookie\";\nimport StripeCheckout from \"react-stripe-checkout\";\nimport CartList from \"../components/Cart/CartList\";\nimport CartSubTotal from \"../components/Cart/CartSubTotal\";\nimport calculateCartTotal from \"../utils/calculateCartTotal\";\nimport Link from \"next/link\";\nimport axios from \"axios\";\nimport baseURL from \"../utils/baseURL\";\nimport Spinner from \"../components/Shared/Spinner\";\n\nvar Cart = function Cart() {\n  var _useAuth = useAuth(),\n      currentUser = _useAuth.currentUser;\n\n  var _useCart = useCart(),\n      carts = _useCart.carts,\n      removeCart = _useCart.removeCart,\n      clearCart = _useCart.clearCart;\n\n  var _calculateCartTotal = calculateCartTotal(carts),\n      cartTotal = _calculateCartTotal.cartTotal,\n      stripeTotal = _calculateCartTotal.stripeTotal;\n\n  var _useState = useState(false),\n      submitting = _useState[0],\n      setSubmitting = _useState[1];\n\n  var handleCheckout = function handleCheckout(paymentData) {\n    var token, payload, headers;\n    return _regeneratorRuntime.async(function handleCheckout$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            token = cookie.get(\"token\");\n            payload = {\n              paymentData: paymentData\n            };\n            headers = {\n              headers: {\n                Authorization: token\n              }\n            };\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(axios.post(\"\".concat(baseURL, \"/api/checkout\"), payload, headers));\n\n          case 6:\n            clearCart();\n            _context.next = 12;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 9]]);\n  };\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-1906103563\" + \" \" + \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, currentUser ? __jsx(\"div\", {\n    className: \"jsx-1906103563\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    className: \"jsx-1906103563\" + \" \" + \"page-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, \"Your Cart\"), carts.length > 0 ? __jsx(React.Fragment, null, __jsx(CartList, {\n    carts: carts,\n    removeCart: removeCart,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }), __jsx(CartSubTotal, {\n    total: cartTotal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }), __jsx(StripeCheckout, {\n    name: \"Dress Shop\",\n    amount: stripeTotal,\n    currency: \"USD\",\n    shippingAddress: true,\n    billingAddress: true,\n    zipCode: true,\n    stripeKey: \"pk_test_hsm6fyMNxWvCWNRY58tIAXAw006jqf8Kzt\",\n    token: handleCheckout,\n    triggerEvent: \"onClick\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-1906103563\" + \" \" + \"checkout-btn-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, __jsx(\"button\", {\n    disabled: submitting,\n    className: \"jsx-1906103563\" + \" \" + \"checkout-btn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \" \", !submitting ? __jsx(Spinner, {\n    color: \"#fff\",\n    width: 40,\n    height: 40,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }) : \"CHECK OUT\", \" \")))) : __jsx(\"div\", {\n    className: \"jsx-1906103563\" + \" \" + \"msg-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-1906103563\" + \" \" + \"msg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \" Your cart is empty :( \"), __jsx(Link, {\n    href: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    className: \"jsx-1906103563\" + \" \" + \"btn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \" Go Shop Now \")))) : __jsx(\"div\", {\n    className: \"jsx-1906103563\" + \" \" + \"msg-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    className: \"jsx-1906103563\" + \" \" + \"page-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \" Please login to see your cart \"), __jsx(Link, {\n    href: \"/login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    className: \"jsx-1906103563\" + \" \" + \"btn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \" Login \")))), __jsx(_JSXStyle, {\n    id: \"1906103563\",\n    __self: this\n  }, \".container.jsx-1906103563{max-width:1200px;margin:2rem auto;}.page-title.jsx-1906103563{font-size:3rem;}.checkout-btn-wrapper.jsx-1906103563{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.checkout-btn.jsx-1906103563,.btn.jsx-1906103563{width:20rem;color:#fff;background-color:var(--color-dark);border:1px solid var(--color-dark; height:8rem; display:block; font-size:1.8rem; cursor:pointer; } .btn { margin:5rem 0; } .msg { font-size:2.2rem; } .msg-container { padding:2rem 0; text-align:center; display:flex; flex-direction:column; align-items:center; justify-content:center; };}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1c3MvcHJvamVjdHMvZHJlc3Mtc2hvcC9wYWdlcy9jYXJ0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW9GUyxBQUc4QixBQUtGLEFBSUYsQUFPRCxZQUNELEdBWGIsRUFMbUIsTUFpQmtCLFdBaEJyQyx3QkF3Q0YsZ0JBaEM2QixpR0FDTiw2RkFDckIsK0VBOEJEIiwiZmlsZSI6Ii9ob21lL3J1c3MvcHJvamVjdHMvZHJlc3Mtc2hvcC9wYWdlcy9jYXJ0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBMYXlvdXQgZnJvbSBcIi4uL2NvbXBvbmVudHMvTGF5b3V0XCI7XG5pbXBvcnQgeyB1c2VBdXRoIH0gZnJvbSBcIi4uL3N0b3JlL2F1dGgvYXV0aC5jb250ZXh0XCI7XG5pbXBvcnQgeyB1c2VDYXJ0IH0gZnJvbSBcIi4uL3N0b3JlL2NhcnQvY2FydC5jb250ZXh0XCI7XG5pbXBvcnQgY29va2llIGZyb20gXCJqcy1jb29raWVcIjtcbmltcG9ydCBTdHJpcGVDaGVja291dCBmcm9tIFwicmVhY3Qtc3RyaXBlLWNoZWNrb3V0XCI7XG5pbXBvcnQgQ2FydExpc3QgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FydC9DYXJ0TGlzdFwiO1xuaW1wb3J0IENhcnRTdWJUb3RhbCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJ0L0NhcnRTdWJUb3RhbFwiO1xuaW1wb3J0IGNhbGN1bGF0ZUNhcnRUb3RhbCBmcm9tIFwiLi4vdXRpbHMvY2FsY3VsYXRlQ2FydFRvdGFsXCI7XG5pbXBvcnQgTGluayBmcm9tIFwibmV4dC9saW5rXCI7XG5pbXBvcnQgYXhpb3MgZnJvbSBcImF4aW9zXCI7XG5pbXBvcnQgYmFzZVVSTCBmcm9tIFwiLi4vdXRpbHMvYmFzZVVSTFwiO1xuaW1wb3J0IFNwaW5uZXIgZnJvbSBcIi4uL2NvbXBvbmVudHMvU2hhcmVkL1NwaW5uZXJcIjtcblxuY29uc3QgQ2FydCA9ICgpID0+IHtcbiAgY29uc3QgeyBjdXJyZW50VXNlciB9ID0gdXNlQXV0aCgpO1xuICBjb25zdCB7IGNhcnRzLCByZW1vdmVDYXJ0LCBjbGVhckNhcnQgfSA9IHVzZUNhcnQoKTtcbiAgY29uc3QgeyBjYXJ0VG90YWwsIHN0cmlwZVRvdGFsIH0gPSBjYWxjdWxhdGVDYXJ0VG90YWwoY2FydHMpO1xuICBjb25zdCBbc3VibWl0dGluZywgc2V0U3VibWl0dGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgY29uc3QgaGFuZGxlQ2hlY2tvdXQgPSBhc3luYyBwYXltZW50RGF0YSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRva2VuID0gY29va2llLmdldChcInRva2VuXCIpO1xuICAgICAgY29uc3QgcGF5bG9hZCA9IHsgcGF5bWVudERhdGEgfTtcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSB7IGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogdG9rZW4gfSB9O1xuICAgICAgYXdhaXQgYXhpb3MucG9zdChgJHtiYXNlVVJMfS9hcGkvY2hlY2tvdXRgLCBwYXlsb2FkLCBoZWFkZXJzKTtcbiAgICAgIGNsZWFyQ2FydCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPExheW91dD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyXCI+XG4gICAgICAgIHtjdXJyZW50VXNlciA/IChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInBhZ2UtdGl0bGVcIj5Zb3VyIENhcnQ8L2gxPlxuICAgICAgICAgICAge2NhcnRzLmxlbmd0aCA+IDAgPyAoXG4gICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgPENhcnRMaXN0IGNhcnRzPXtjYXJ0c30gcmVtb3ZlQ2FydD17cmVtb3ZlQ2FydH0gLz5cbiAgICAgICAgICAgICAgICA8Q2FydFN1YlRvdGFsIHRvdGFsPXtjYXJ0VG90YWx9IC8+XG4gICAgICAgICAgICAgICAgPFN0cmlwZUNoZWNrb3V0XG4gICAgICAgICAgICAgICAgICBuYW1lPVwiRHJlc3MgU2hvcFwiXG4gICAgICAgICAgICAgICAgICBhbW91bnQ9e3N0cmlwZVRvdGFsfVxuICAgICAgICAgICAgICAgICAgY3VycmVuY3k9XCJVU0RcIlxuICAgICAgICAgICAgICAgICAgc2hpcHBpbmdBZGRyZXNzPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgYmlsbGluZ0FkZHJlc3M9e3RydWV9XG4gICAgICAgICAgICAgICAgICB6aXBDb2RlPXt0cnVlfVxuICAgICAgICAgICAgICAgICAgc3RyaXBlS2V5PVwicGtfdGVzdF9oc202ZnlNTnhXdkNXTlJZNTh0SUFYQXcwMDZqcWY4S3p0XCJcbiAgICAgICAgICAgICAgICAgIHRva2VuPXtoYW5kbGVDaGVja291dH1cbiAgICAgICAgICAgICAgICAgIHRyaWdnZXJFdmVudD1cIm9uQ2xpY2tcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hlY2tvdXQtYnRuLXdyYXBwZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9XCJjaGVja291dC1idG5cIiBkaXNhYmxlZD17c3VibWl0dGluZ30+XG4gICAgICAgICAgICAgICAgICAgICAge1wiIFwifVxuICAgICAgICAgICAgICAgICAgICAgIHshc3VibWl0dGluZyA/IChcbiAgICAgICAgICAgICAgICAgICAgICAgIDxTcGlubmVyIGNvbG9yPVwiI2ZmZlwiIHdpZHRoPXs0MH0gaGVpZ2h0PXs0MH0gLz5cbiAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJDSEVDSyBPVVRcIlxuICAgICAgICAgICAgICAgICAgICAgICl9e1wiIFwifVxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvU3RyaXBlQ2hlY2tvdXQ+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtc2ctY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtc2dcIj4gWW91ciBjYXJ0IGlzIGVtcHR5IDooIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxMaW5rIGhyZWY9XCIvXCI+XG4gICAgICAgICAgICAgICAgICA8YSBjbGFzc05hbWU9XCJidG5cIj4gR28gU2hvcCBOb3cgPC9hPlxuICAgICAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXNnLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInBhZ2UtdGl0bGVcIj4gUGxlYXNlIGxvZ2luIHRvIHNlZSB5b3VyIGNhcnQgPC9oMT5cbiAgICAgICAgICAgIDxMaW5rIGhyZWY9XCIvbG9naW5cIj5cbiAgICAgICAgICAgICAgPGEgY2xhc3NOYW1lPVwiYnRuXCI+IExvZ2luIDwvYT5cbiAgICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD5cbiAgICAgICAge2BcbiAgICAgICAgICAuY29udGFpbmVyIHtcbiAgICAgICAgICAgIG1heC13aWR0aDogMTIwMHB4O1xuICAgICAgICAgICAgbWFyZ2luOiAycmVtIGF1dG87XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLnBhZ2UtdGl0bGUge1xuICAgICAgICAgICAgZm9udC1zaXplOiAzcmVtO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC5jaGVja291dC1idG4td3JhcHBlciB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLmNoZWNrb3V0LWJ0bixcbiAgICAgICAgICAuYnRuIHtcbiAgICAgICAgICAgIHdpZHRoOiAyMHJlbTtcbiAgICAgICAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItZGFyayk7XG4gICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1jb2xvci1kYXJrO1xuICAgICAgICAgICAgaGVpZ2h0OiA4cmVtO1xuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICBmb250LXNpemU6IDEuOHJlbTtcbiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAuYnRuIHtcbiAgICAgICAgICAgIG1hcmdpbjogNXJlbSAwO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC5tc2cge1xuICAgICAgICAgICAgZm9udC1zaXplOiAyLjJyZW07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLm1zZy1jb250YWluZXIge1xuICAgICAgICAgICAgcGFkZGluZzogMnJlbSAwO1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgfVxuICAgICAgICBgfVxuICAgICAgPC9zdHlsZT5cbiAgICA8L0xheW91dD5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENhcnQ7XG4iXX0= */\\n/*@ sourceURL=/home/russ/projects/dress-shop/pages/cart.js */\"));\n};\n\nexport default Cart;","map":{"version":3,"sources":["/home/russ/projects/dress-shop/pages/cart.js"],"names":["useState","Layout","useAuth","useCart","cookie","StripeCheckout","CartList","CartSubTotal","calculateCartTotal","Link","axios","baseURL","Spinner","Cart","currentUser","carts","removeCart","clearCart","cartTotal","stripeTotal","submitting","setSubmitting","handleCheckout","paymentData","token","get","payload","headers","Authorization","post","console","log","length"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport Layout from \"../components/Layout\";\nimport { useAuth } from \"../store/auth/auth.context\";\nimport { useCart } from \"../store/cart/cart.context\";\nimport cookie from \"js-cookie\";\nimport StripeCheckout from \"react-stripe-checkout\";\nimport CartList from \"../components/Cart/CartList\";\nimport CartSubTotal from \"../components/Cart/CartSubTotal\";\nimport calculateCartTotal from \"../utils/calculateCartTotal\";\nimport Link from \"next/link\";\nimport axios from \"axios\";\nimport baseURL from \"../utils/baseURL\";\nimport Spinner from \"../components/Shared/Spinner\";\n\nconst Cart = () => {\n  const { currentUser } = useAuth();\n  const { carts, removeCart, clearCart } = useCart();\n  const { cartTotal, stripeTotal } = calculateCartTotal(carts);\n  const [submitting, setSubmitting] = useState(false);\n\n  const handleCheckout = async paymentData => {\n    try {\n      const token = cookie.get(\"token\");\n      const payload = { paymentData };\n      const headers = { headers: { Authorization: token } };\n      await axios.post(`${baseURL}/api/checkout`, payload, headers);\n      clearCart();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return (\n    <Layout>\n      <div className=\"container\">\n        {currentUser ? (\n          <div>\n            <h1 className=\"page-title\">Your Cart</h1>\n            {carts.length > 0 ? (\n              <>\n                <CartList carts={carts} removeCart={removeCart} />\n                <CartSubTotal total={cartTotal} />\n                <StripeCheckout\n                  name=\"Dress Shop\"\n                  amount={stripeTotal}\n                  currency=\"USD\"\n                  shippingAddress={true}\n                  billingAddress={true}\n                  zipCode={true}\n                  stripeKey=\"pk_test_hsm6fyMNxWvCWNRY58tIAXAw006jqf8Kzt\"\n                  token={handleCheckout}\n                  triggerEvent=\"onClick\"\n                >\n                  <div className=\"checkout-btn-wrapper\">\n                    <button className=\"checkout-btn\" disabled={submitting}>\n                      {\" \"}\n                      {!submitting ? (\n                        <Spinner color=\"#fff\" width={40} height={40} />\n                      ) : (\n                        \"CHECK OUT\"\n                      )}{\" \"}\n                    </button>\n                  </div>\n                </StripeCheckout>\n              </>\n            ) : (\n              <div className=\"msg-container\">\n                <div className=\"msg\"> Your cart is empty :( </div>\n                <Link href=\"/\">\n                  <a className=\"btn\"> Go Shop Now </a>\n                </Link>\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"msg-container\">\n            <h1 className=\"page-title\"> Please login to see your cart </h1>\n            <Link href=\"/login\">\n              <a className=\"btn\"> Login </a>\n            </Link>\n          </div>\n        )}\n      </div>\n      <style jsx>\n        {`\n          .container {\n            max-width: 1200px;\n            margin: 2rem auto;\n          }\n\n          .page-title {\n            font-size: 3rem;\n          }\n\n          .checkout-btn-wrapper {\n            display: flex;\n            justify-content: flex-end;\n            align-items: center;\n          }\n\n          .checkout-btn,\n          .btn {\n            width: 20rem;\n            color: #fff;\n            background-color: var(--color-dark);\n            border: 1px solid var(--color-dark;\n            height: 8rem;\n            display: block;\n            font-size: 1.8rem;\n            cursor: pointer;\n          }\n\n          .btn {\n            margin: 5rem 0;\n          }\n\n          .msg {\n            font-size: 2.2rem;\n          }\n\n          .msg-container {\n            padding: 2rem 0;\n            text-align: center;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n          }\n        `}\n      </style>\n    </Layout>\n  );\n};\n\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}