{"ast":null,"code":"import connectDB from \"../../utils/connectDB\";\nimport Cart from \"../../models/Cart\";\nimport jwt from \"jsonwebtoken\";\nconnectDB();\nexport default (async (req, res) => {\n  switch (req.method) {\n    case \"GET\":\n      await handleGetRequest();\n      break;\n\n    case \"POST\":\n      await handlePostRequest(req, res);\n\n    default:\n      res.status(422).send(\"Unknown method\");\n  }\n});\n\nasync function handleGetRequest() {}\n\nasync function handlePostRequest(req, res) {\n  const {\n    productId,\n    quantity\n  } = req.body;\n  if (!\"authorization\" in req.headers) return res.status(401).send(\"No authorization token\");\n  console.log(productId, quantity, req.headers.authorization);\n  res.send(\"test\"); //   try {\n  //     const { userId } = jwt.verify(\n  //       req.headers.authorization,\n  //       process.env.JWT_SECRET\n  //     );\n  //     const cart = await new Cart({\n  //       user: userId,\n  //       carts: [{ quantity, product: productId }]\n  //     }).save();\n  //     console.log(cart);\n  //     res.send(\"test\");\n  //   } catch (error) {\n  //     console.error(error);\n  //     res.status(500).send(\"Error in adding cart\");\n  //   }\n}","map":{"version":3,"sources":["/home/russ/projects/dress-shop/pages/api/cart.js"],"names":["connectDB","Cart","jwt","req","res","method","handleGetRequest","handlePostRequest","status","send","productId","quantity","body","headers","console","log","authorization"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,uBAAtB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,GAAP,MAAgB,cAAhB;AAEAF,SAAS;AAET,gBAAe,OAAOG,GAAP,EAAYC,GAAZ,KAAoB;AACjC,UAAQD,GAAG,CAACE,MAAZ;AACE,SAAK,KAAL;AACE,YAAMC,gBAAgB,EAAtB;AACA;;AACF,SAAK,MAAL;AACE,YAAMC,iBAAiB,CAACJ,GAAD,EAAMC,GAAN,CAAvB;;AACF;AACEA,MAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,gBAArB;AAPJ;AASD,CAVD;;AAYA,eAAeH,gBAAf,GAAkC,CAAE;;AAEpC,eAAeC,iBAAf,CAAiCJ,GAAjC,EAAsCC,GAAtC,EAA2C;AACzC,QAAM;AAAEM,IAAAA,SAAF;AAAaC,IAAAA;AAAb,MAA0BR,GAAG,CAACS,IAApC;AACA,MAAI,CAAC,eAAD,IAAoBT,GAAG,CAACU,OAA5B,EACE,OAAOT,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,wBAArB,CAAP;AACFK,EAAAA,OAAO,CAACC,GAAR,CAAYL,SAAZ,EAAuBC,QAAvB,EAAiCR,GAAG,CAACU,OAAJ,CAAYG,aAA7C;AACAZ,EAAAA,GAAG,CAACK,IAAJ,CAAS,MAAT,EALyC,CAMzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD","sourcesContent":["import connectDB from \"../../utils/connectDB\";\nimport Cart from \"../../models/Cart\";\nimport jwt from \"jsonwebtoken\";\n\nconnectDB();\n\nexport default async (req, res) => {\n  switch (req.method) {\n    case \"GET\":\n      await handleGetRequest();\n      break;\n    case \"POST\":\n      await handlePostRequest(req, res);\n    default:\n      res.status(422).send(\"Unknown method\");\n  }\n};\n\nasync function handleGetRequest() {}\n\nasync function handlePostRequest(req, res) {\n  const { productId, quantity } = req.body;\n  if (!\"authorization\" in req.headers)\n    return res.status(401).send(\"No authorization token\");\n  console.log(productId, quantity, req.headers.authorization);\n  res.send(\"test\");\n  //   try {\n  //     const { userId } = jwt.verify(\n  //       req.headers.authorization,\n  //       process.env.JWT_SECRET\n  //     );\n  //     const cart = await new Cart({\n  //       user: userId,\n  //       carts: [{ quantity, product: productId }]\n  //     }).save();\n  //     console.log(cart);\n  //     res.send(\"test\");\n  //   } catch (error) {\n  //     console.error(error);\n  //     res.status(500).send(\"Error in adding cart\");\n  //   }\n}\n"]},"metadata":{},"sourceType":"module"}