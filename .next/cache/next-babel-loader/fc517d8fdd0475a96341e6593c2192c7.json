{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar _jsxFileName = \"/home/russ/projects/dress-shop/pages/admin/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { IoMdAdd } from 'react-icons/io';\nimport { useModal } from '../../store';\nimport { useToast } from '../../hooks';\nimport { Modal, Toast, Spinner } from '../../components/Shared';\nimport Layout from '../../components/Layout';\nimport ProductForm from '../../components/Admin/Home/ProductForm';\nimport ProductTable from '../../components/Admin/Home/ProductTable';\nimport axios from 'axios';\nimport baseURL from '../../utils/baseURL';\n\nvar Admin = function Admin() {\n  var _useModal = useModal(),\n      show = _useModal.show,\n      closeModal = _useModal.closeModal,\n      openModal = _useModal.openModal;\n\n  var _useToast = useToast(),\n      isOpen = _useToast.isOpen,\n      showToast = _useToast.showToast;\n\n  var _useState = useState(''),\n      message = _useState[0],\n      setMessage = _useState[1];\n\n  var _useState2 = useState([]),\n      products = _useState2[0],\n      setProducts = _useState2[1];\n\n  var _useState3 = useState(true),\n      loading = _useState3[0],\n      setLoading = _useState3[1];\n\n  useEffect(function () {\n    function getProducts() {\n      var _ref, data;\n\n      return _regeneratorRuntime.async(function getProducts$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(axios.get(\"\".concat(baseURL, \"/api/products\")));\n\n            case 3:\n              _ref = _context.sent;\n              data = _ref.data;\n              setProducts(data.products);\n              setLoading(false);\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 9]]);\n    }\n\n    getProducts();\n  }, []);\n\n  function handleDeleteProduct(id) {\n    var payload, filteredProducts;\n    return _regeneratorRuntime.async(function handleDeleteProduct$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            payload = {\n              params: {\n                id: id\n              }\n            };\n            _context2.next = 4;\n            return _regeneratorRuntime.awrap(axios[\"delete\"](\"\".concat(baseURL, \"/api/product\"), payload));\n\n          case 4:\n            filteredProducts = products.filter(function (product) {\n              return product._id !== id;\n            });\n            setProducts(filteredProducts);\n            _context2.next = 11;\n            break;\n\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(_context2.t0);\n\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 8]]);\n  }\n\n  function addProduct(product) {\n    setProducts([product].concat(_toConsumableArray(products)));\n    showToast();\n    setMessage('Product successfully added');\n  }\n\n  function addProductFormModal() {\n    return __jsx(Modal, {\n      show: show,\n      close: closeModal,\n      title: \"Add Product\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, __jsx(ProductForm, {\n      onSubmit: function onSubmit(val) {\n        return addProduct(val);\n      },\n      onClose: closeModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }));\n  }\n\n  function confirmDeleteModal(id) {\n    return __jsx(Modal, {\n      show: show,\n      close: closeModal,\n      title: \"Delete Product\",\n      hasFooter: true,\n      onSubmit: function _callee() {\n        return _regeneratorRuntime.async(function _callee$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return _regeneratorRuntime.awrap(handleDeleteProduct(id));\n\n              case 2:\n                showToast();\n                setMessage('Successfully Deleted');\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      style: {\n        fontSize: '2rem'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Are you sure you want to delete this product?\"));\n  }\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-3922909769\" + \" \" + \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, __jsx(Toast, {\n    isOpen: isOpen,\n    message: message,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"jsx-3922909769\" + \" \" + \"welcome-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Hi, Welcome Back Admin\"), __jsx(\"div\", {\n    className: \"jsx-3922909769\" + \" \" + \"header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-3922909769\" + \" \" + \"page-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \" List of All Products \"), __jsx(\"button\", {\n    onClick: function onClick() {\n      return openModal(addProductFormModal);\n    },\n    className: \"jsx-3922909769\" + \" \" + \"btn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    className: \"jsx-3922909769\" + \" \" + \"btn-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \" Add Product\"), __jsx(IoMdAdd, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }))), loading ? __jsx(\"div\", {\n    className: \"jsx-3922909769\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, __jsx(Spinner, {\n    width: \"40\",\n    height: \"40\",\n    color: \"var(--color-primary)\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  })) : __jsx(ProductTable, {\n    products: products,\n    deleteProduct: function deleteProduct(id) {\n      return openModal(confirmDeleteModal(id));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  })), ' ', __jsx(_JSXStyle, {\n    id: \"3922909769\",\n    __self: this\n  }, \".container.jsx-3922909769{max-width:120rem;margin:3rem auto;padding:0 2rem;}.page-title.jsx-3922909769{font-size:2.5rem;}.header.jsx-3922909769{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.welcome-text.jsx-3922909769{font-size:2rem;padding-bottom:2rem;}.btn.jsx-3922909769{height:5rem;padding:0 2rem;background-color:var(--color-dark);color:#fff;font-size:2rem;border:1px solid transparent;cursor:pointer;}.btn-text.jsx-3922909769{margin-right:0.5rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1c3MvcHJvamVjdHMvZHJlc3Mtc2hvcC9wYWdlcy9hZG1pbi9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFzR2tCLEFBRzRCLEFBS0EsQUFJSixBQUtFLEFBS0gsQUFVUSxZQVRMLEdBTEssRUFkSCxBQUtuQixHQXdCQSxPQVRxQyxPQW5CcEIsQ0FjakIsY0FiQSxhQW1CYSxXQUNJLENBYmUsY0FjRCw2QkFDZCxlQUNqQix5REFmQSIsImZpbGUiOiIvaG9tZS9ydXNzL3Byb2plY3RzL2RyZXNzLXNob3AvcGFnZXMvYWRtaW4vaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IElvTWRBZGQgfSBmcm9tICdyZWFjdC1pY29ucy9pbyc7XG5pbXBvcnQgeyB1c2VNb2RhbCB9IGZyb20gJy4uLy4uL3N0b3JlJztcbmltcG9ydCB7IHVzZVRvYXN0IH0gZnJvbSAnLi4vLi4vaG9va3MnO1xuaW1wb3J0IHsgTW9kYWwsIFRvYXN0LCBTcGlubmVyIH0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9TaGFyZWQnO1xuaW1wb3J0IExheW91dCBmcm9tICcuLi8uLi9jb21wb25lbnRzL0xheW91dCc7XG5pbXBvcnQgUHJvZHVjdEZvcm0gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9BZG1pbi9Ib21lL1Byb2R1Y3RGb3JtJztcbmltcG9ydCBQcm9kdWN0VGFibGUgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9BZG1pbi9Ib21lL1Byb2R1Y3RUYWJsZSc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IGJhc2VVUkwgZnJvbSAnLi4vLi4vdXRpbHMvYmFzZVVSTCc7XG5cbmNvbnN0IEFkbWluID0gKCkgPT4ge1xuICBjb25zdCB7IHNob3csIGNsb3NlTW9kYWwsIG9wZW5Nb2RhbCB9ID0gdXNlTW9kYWwoKTtcbiAgY29uc3QgeyBpc09wZW4sIHNob3dUb2FzdCB9ID0gdXNlVG9hc3QoKTtcbiAgY29uc3QgW21lc3NhZ2UsIHNldE1lc3NhZ2VdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbcHJvZHVjdHMsIHNldFByb2R1Y3RzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBhc3luYyBmdW5jdGlvbiBnZXRQcm9kdWN0cygpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYXhpb3MuZ2V0KGAke2Jhc2VVUkx9L2FwaS9wcm9kdWN0c2ApO1xuICAgICAgICBzZXRQcm9kdWN0cyhkYXRhLnByb2R1Y3RzKTtcbiAgICAgICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICAgIGdldFByb2R1Y3RzKCk7XG4gIH0sIFtdKTtcblxuICBhc3luYyBmdW5jdGlvbiBoYW5kbGVEZWxldGVQcm9kdWN0KGlkKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7IHBhcmFtczogeyBpZCB9IH07XG4gICAgICBhd2FpdCBheGlvcy5kZWxldGUoYCR7YmFzZVVSTH0vYXBpL3Byb2R1Y3RgLCBwYXlsb2FkKTtcbiAgICAgIGNvbnN0IGZpbHRlcmVkUHJvZHVjdHMgPSBwcm9kdWN0cy5maWx0ZXIocHJvZHVjdCA9PiBwcm9kdWN0Ll9pZCAhPT0gaWQpO1xuICAgICAgc2V0UHJvZHVjdHMoZmlsdGVyZWRQcm9kdWN0cyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBhZGRQcm9kdWN0KHByb2R1Y3QpIHtcbiAgICBzZXRQcm9kdWN0cyhbcHJvZHVjdCwgLi4ucHJvZHVjdHNdKTtcbiAgICBzaG93VG9hc3QoKTtcbiAgICBzZXRNZXNzYWdlKCdQcm9kdWN0IHN1Y2Nlc3NmdWxseSBhZGRlZCcpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkUHJvZHVjdEZvcm1Nb2RhbCgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPE1vZGFsIHNob3c9e3Nob3d9IGNsb3NlPXtjbG9zZU1vZGFsfSB0aXRsZT17YEFkZCBQcm9kdWN0YH0+XG4gICAgICAgIDxQcm9kdWN0Rm9ybSBvblN1Ym1pdD17dmFsID0+IGFkZFByb2R1Y3QodmFsKX0gb25DbG9zZT17Y2xvc2VNb2RhbH0gLz5cbiAgICAgIDwvTW9kYWw+XG4gICAgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbmZpcm1EZWxldGVNb2RhbChpZCkge1xuICAgIHJldHVybiAoXG4gICAgICA8TW9kYWxcbiAgICAgICAgc2hvdz17c2hvd31cbiAgICAgICAgY2xvc2U9e2Nsb3NlTW9kYWx9XG4gICAgICAgIHRpdGxlPXtgRGVsZXRlIFByb2R1Y3RgfVxuICAgICAgICBoYXNGb290ZXJcbiAgICAgICAgb25TdWJtaXQ9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCBoYW5kbGVEZWxldGVQcm9kdWN0KGlkKTtcbiAgICAgICAgICBzaG93VG9hc3QoKTtcbiAgICAgICAgICBzZXRNZXNzYWdlKCdTdWNjZXNzZnVsbHkgRGVsZXRlZCcpO1xuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAnMnJlbScgfX0+XG4gICAgICAgICAgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIHByb2R1Y3Q/XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9Nb2RhbD5cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cbiAgICAgICAgPFRvYXN0IGlzT3Blbj17aXNPcGVufSBtZXNzYWdlPXttZXNzYWdlfSAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIndlbGNvbWUtdGV4dFwiPkhpLCBXZWxjb21lIEJhY2sgQWRtaW48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZ2UtdGl0bGVcIj4gTGlzdCBvZiBBbGwgUHJvZHVjdHMgPC9kaXY+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gb3Blbk1vZGFsKGFkZFByb2R1Y3RGb3JtTW9kYWwpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJidG4tdGV4dFwiPiBBZGQgUHJvZHVjdDwvc3Bhbj5cbiAgICAgICAgICAgIDxJb01kQWRkIC8+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7bG9hZGluZyA/IChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPFNwaW5uZXIgd2lkdGg9XCI0MFwiIGhlaWdodD1cIjQwXCIgY29sb3I9e2B2YXIoLS1jb2xvci1wcmltYXJ5KWB9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPFByb2R1Y3RUYWJsZVxuICAgICAgICAgICAgcHJvZHVjdHM9e3Byb2R1Y3RzfVxuICAgICAgICAgICAgZGVsZXRlUHJvZHVjdD17aWQgPT4gb3Blbk1vZGFsKGNvbmZpcm1EZWxldGVNb2RhbChpZCkpfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj57JyAnfVxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAuY29udGFpbmVyIHtcbiAgICAgICAgICBtYXgtd2lkdGg6IDEyMHJlbTtcbiAgICAgICAgICBtYXJnaW46IDNyZW0gYXV0bztcbiAgICAgICAgICBwYWRkaW5nOiAwIDJyZW07XG4gICAgICAgIH1cbiAgICAgICAgLnBhZ2UtdGl0bGUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMi41cmVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLmhlYWRlciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIH1cblxuICAgICAgICAud2VsY29tZS10ZXh0IHtcbiAgICAgICAgICBmb250LXNpemU6IDJyZW07XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDJyZW07XG4gICAgICAgIH1cblxuICAgICAgICAuYnRuIHtcbiAgICAgICAgICBoZWlnaHQ6IDVyZW07XG4gICAgICAgICAgcGFkZGluZzogMCAycmVtO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLWRhcmspO1xuICAgICAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMnJlbTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICAuYnRuLXRleHQge1xuICAgICAgICAgIG1hcmdpbi1yaWdodDogMC41cmVtO1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+eycgJ31cbiAgICA8L0xheW91dD5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFkbWluO1xuIl19 */\\n/*@ sourceURL=/home/russ/projects/dress-shop/pages/admin/index.js */\"), ' ');\n};\n\nexport default Admin;","map":{"version":3,"sources":["/home/russ/projects/dress-shop/pages/admin/index.js"],"names":["React","useState","useEffect","IoMdAdd","useModal","useToast","Modal","Toast","Spinner","Layout","ProductForm","ProductTable","axios","baseURL","Admin","show","closeModal","openModal","isOpen","showToast","message","setMessage","products","setProducts","loading","setLoading","getProducts","get","data","console","log","handleDeleteProduct","id","payload","params","filteredProducts","filter","product","_id","addProduct","addProductFormModal","val","confirmDeleteModal","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { IoMdAdd } from 'react-icons/io';\nimport { useModal } from '../../store';\nimport { useToast } from '../../hooks';\nimport { Modal, Toast, Spinner } from '../../components/Shared';\nimport Layout from '../../components/Layout';\nimport ProductForm from '../../components/Admin/Home/ProductForm';\nimport ProductTable from '../../components/Admin/Home/ProductTable';\nimport axios from 'axios';\nimport baseURL from '../../utils/baseURL';\n\nconst Admin = () => {\n  const { show, closeModal, openModal } = useModal();\n  const { isOpen, showToast } = useToast();\n  const [message, setMessage] = useState('');\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function getProducts() {\n      try {\n        const { data } = await axios.get(`${baseURL}/api/products`);\n        setProducts(data.products);\n        setLoading(false);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    getProducts();\n  }, []);\n\n  async function handleDeleteProduct(id) {\n    try {\n      const payload = { params: { id } };\n      await axios.delete(`${baseURL}/api/product`, payload);\n      const filteredProducts = products.filter(product => product._id !== id);\n      setProducts(filteredProducts);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  function addProduct(product) {\n    setProducts([product, ...products]);\n    showToast();\n    setMessage('Product successfully added');\n  }\n\n  function addProductFormModal() {\n    return (\n      <Modal show={show} close={closeModal} title={`Add Product`}>\n        <ProductForm onSubmit={val => addProduct(val)} onClose={closeModal} />\n      </Modal>\n    );\n  }\n\n  function confirmDeleteModal(id) {\n    return (\n      <Modal\n        show={show}\n        close={closeModal}\n        title={`Delete Product`}\n        hasFooter\n        onSubmit={async () => {\n          await handleDeleteProduct(id);\n          showToast();\n          setMessage('Successfully Deleted');\n        }}\n      >\n        <div style={{ fontSize: '2rem' }}>\n          Are you sure you want to delete this product?\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"container\">\n        <Toast isOpen={isOpen} message={message} />\n        <div className=\"welcome-text\">Hi, Welcome Back Admin</div>\n        <div className=\"header\">\n          <div className=\"page-title\"> List of All Products </div>\n          <button\n            onClick={() => openModal(addProductFormModal)}\n            className=\"btn\"\n          >\n            <span className=\"btn-text\"> Add Product</span>\n            <IoMdAdd />\n          </button>\n        </div>\n        {loading ? (\n          <div>\n            <Spinner width=\"40\" height=\"40\" color={`var(--color-primary)`} />\n          </div>\n        ) : (\n          <ProductTable\n            products={products}\n            deleteProduct={id => openModal(confirmDeleteModal(id))}\n          />\n        )}\n      </div>{' '}\n      <style jsx>{`\n        .container {\n          max-width: 120rem;\n          margin: 3rem auto;\n          padding: 0 2rem;\n        }\n        .page-title {\n          font-size: 2.5rem;\n        }\n\n        .header {\n          display: flex;\n          justify-content: space-between;\n        }\n\n        .welcome-text {\n          font-size: 2rem;\n          padding-bottom: 2rem;\n        }\n\n        .btn {\n          height: 5rem;\n          padding: 0 2rem;\n          background-color: var(--color-dark);\n          color: #fff;\n          font-size: 2rem;\n          border: 1px solid transparent;\n          cursor: pointer;\n        }\n\n        .btn-text {\n          margin-right: 0.5rem;\n        }\n      `}</style>{' '}\n    </Layout>\n  );\n};\n\nexport default Admin;\n"]},"metadata":{},"sourceType":"module"}