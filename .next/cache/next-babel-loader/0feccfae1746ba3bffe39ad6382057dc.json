{"ast":null,"code":"var _jsxFileName = \"/home/russ/projects/dress-shop/pages/admin/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { IoMdAdd } from 'react-icons/io';\nimport { useModal } from '../../store';\nimport { useToast } from '../../hooks';\nimport { Modal, Toast, Spinner } from '../../components/Shared';\nimport Layout from '../../components/Layout';\nimport ProductForm from '../../components/Admin/Home/ProductForm';\nimport ProductTable from '../../components/Admin/Home/ProductTable';\nimport axios from 'axios';\nimport baseURL from '../../utils/baseURL';\nimport Pagination from '../../components/Shared/Pagination';\n\nconst Admin = () => {\n  const {\n    show,\n    closeModal,\n    openModal\n  } = useModal();\n  const {\n    isOpen,\n    showToast\n  } = useToast();\n  const {\n    0: message,\n    1: setMessage\n  } = useState('');\n  const {\n    0: products,\n    1: setProducts\n  } = useState([]);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(true);\n  const limit = 10;\n  const page = 1;\n  useEffect(() => {\n    async function getProducts() {\n      try {\n        const payload = {\n          params: {\n            page: 1,\n            limit\n          }\n        };\n        const {\n          data\n        } = await axios.get(`${baseURL}/api/products`, payload);\n        setProducts(data.products);\n        setLoading(false);\n      } catch (error) {\n        console.log(error.response);\n      }\n    }\n\n    getProducts();\n  }, []);\n\n  async function handleDeleteProduct(id) {\n    try {\n      const payload = {\n        params: {\n          id\n        }\n      };\n      await axios.delete(`${baseURL}/api/product`, payload);\n      const filteredProducts = products.filter(product => product._id !== id);\n      setProducts(filteredProducts);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  function addProduct(product) {\n    setProducts([product, ...products]);\n    showToast();\n    setMessage('Product successfully added');\n  }\n\n  function addProductFormModal() {\n    return __jsx(Modal, {\n      show: show,\n      close: closeModal,\n      title: `Add Product`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, __jsx(ProductForm, {\n      onSubmit: val => addProduct(val),\n      onClose: closeModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }));\n  }\n\n  function confirmDeleteModal(id) {\n    return __jsx(Modal, {\n      show: show,\n      close: closeModal,\n      title: `Delete Product`,\n      hasFooter: true,\n      onSubmit: async () => {\n        await handleDeleteProduct(id);\n        showToast();\n        setMessage('Successfully Deleted');\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      style: {\n        fontSize: '2rem'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"Are you sure you want to delete this product?\"));\n  }\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-1236423042\" + \" \" + \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, __jsx(Toast, {\n    isOpen: isOpen,\n    message: message,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"jsx-1236423042\" + \" \" + \"welcome-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"Hi, Welcome Back Admin\"), __jsx(\"div\", {\n    className: \"jsx-1236423042\" + \" \" + \"header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-1236423042\" + \" \" + \"page-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \" List of All Products \"), __jsx(\"button\", {\n    onClick: () => openModal(addProductFormModal),\n    className: \"jsx-1236423042\" + \" \" + \"btn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, __jsx(\"span\", {\n    className: \"jsx-1236423042\" + \" \" + \"btn-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \" Add Product\"), __jsx(IoMdAdd, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }))), loading ? __jsx(\"div\", {\n    className: \"jsx-1236423042\" + \" \" + \"loading-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, __jsx(Spinner, {\n    width: \"80\",\n    height: \"90\",\n    color: `var(--color-primary)`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  })) : __jsx(React.Fragment, null, __jsx(ProductTable, {\n    products: products,\n    deleteProduct: id => openModal(confirmDeleteModal(id)),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }), __jsx(Pagination, {\n    total: products.length,\n    limit: 4,\n    activePage: page,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }))), ' ', __jsx(_JSXStyle, {\n    id: \"1236423042\",\n    __self: this\n  }, \".container.jsx-1236423042{max-width:120rem;margin:3rem auto;padding:0 2rem;}.loading-container.jsx-1236423042{margin:10rem 0;text-align:center;}.page-title.jsx-1236423042{font-size:2.5rem;}.header.jsx-1236423042{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.welcome-text.jsx-1236423042{font-size:2rem;padding-bottom:2rem;}.btn.jsx-1236423042{height:5rem;padding:0 2rem;background-color:var(--color-dark);color:#fff;font-size:2rem;border:1px solid transparent;cursor:pointer;}.btn-text.jsx-1236423042{margin-right:0.5rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1c3MvcHJvamVjdHMvZHJlc3Mtc2hvcC9wYWdlcy9hZG1pbi9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE2R2tCLEFBRzRCLEFBTUYsQUFJRSxBQUlKLEFBS0UsQUFLSCxBQVVRLFlBVEwsR0FsQkcsQUFhRSxFQW5CSCxBQVVuQixHQXdCQSxPQVRxQyxNQWxCckMsQ0FOaUIsQ0FtQmpCLGNBbEJBLGFBd0JhLFdBQ0ksQ0FiZSxjQWNELDZCQUNkLGVBQ2pCLHlEQWZBIiwiZmlsZSI6Ii9ob21lL3J1c3MvcHJvamVjdHMvZHJlc3Mtc2hvcC9wYWdlcy9hZG1pbi9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgSW9NZEFkZCB9IGZyb20gJ3JlYWN0LWljb25zL2lvJztcbmltcG9ydCB7IHVzZU1vZGFsIH0gZnJvbSAnLi4vLi4vc3RvcmUnO1xuaW1wb3J0IHsgdXNlVG9hc3QgfSBmcm9tICcuLi8uLi9ob29rcyc7XG5pbXBvcnQgeyBNb2RhbCwgVG9hc3QsIFNwaW5uZXIgfSBmcm9tICcuLi8uLi9jb21wb25lbnRzL1NoYXJlZCc7XG5pbXBvcnQgTGF5b3V0IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvTGF5b3V0JztcbmltcG9ydCBQcm9kdWN0Rm9ybSBmcm9tICcuLi8uLi9jb21wb25lbnRzL0FkbWluL0hvbWUvUHJvZHVjdEZvcm0nO1xuaW1wb3J0IFByb2R1Y3RUYWJsZSBmcm9tICcuLi8uLi9jb21wb25lbnRzL0FkbWluL0hvbWUvUHJvZHVjdFRhYmxlJztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgYmFzZVVSTCBmcm9tICcuLi8uLi91dGlscy9iYXNlVVJMJztcbmltcG9ydCBQYWdpbmF0aW9uIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvU2hhcmVkL1BhZ2luYXRpb24nO1xuXG5jb25zdCBBZG1pbiA9ICgpID0+IHtcbiAgY29uc3QgeyBzaG93LCBjbG9zZU1vZGFsLCBvcGVuTW9kYWwgfSA9IHVzZU1vZGFsKCk7XG4gIGNvbnN0IHsgaXNPcGVuLCBzaG93VG9hc3QgfSA9IHVzZVRvYXN0KCk7XG4gIGNvbnN0IFttZXNzYWdlLCBzZXRNZXNzYWdlXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW3Byb2R1Y3RzLCBzZXRQcm9kdWN0c10gPSB1c2VTdGF0ZShbXSk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBsaW1pdCA9IDEwO1xuICBjb25zdCBwYWdlID0gMTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGFzeW5jIGZ1bmN0aW9uIGdldFByb2R1Y3RzKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHsgcGFyYW1zOiB7IHBhZ2U6IDEsIGxpbWl0IH0gfTtcbiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBheGlvcy5nZXQoYCR7YmFzZVVSTH0vYXBpL3Byb2R1Y3RzYCwgcGF5bG9hZCk7XG4gICAgICAgIHNldFByb2R1Y3RzKGRhdGEucHJvZHVjdHMpO1xuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZ2V0UHJvZHVjdHMoKTtcbiAgfSwgW10pO1xuXG4gIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZURlbGV0ZVByb2R1Y3QoaWQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF5bG9hZCA9IHsgcGFyYW1zOiB7IGlkIH0gfTtcbiAgICAgIGF3YWl0IGF4aW9zLmRlbGV0ZShgJHtiYXNlVVJMfS9hcGkvcHJvZHVjdGAsIHBheWxvYWQpO1xuICAgICAgY29uc3QgZmlsdGVyZWRQcm9kdWN0cyA9IHByb2R1Y3RzLmZpbHRlcihwcm9kdWN0ID0+IHByb2R1Y3QuX2lkICE9PSBpZCk7XG4gICAgICBzZXRQcm9kdWN0cyhmaWx0ZXJlZFByb2R1Y3RzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFByb2R1Y3QocHJvZHVjdCkge1xuICAgIHNldFByb2R1Y3RzKFtwcm9kdWN0LCAuLi5wcm9kdWN0c10pO1xuICAgIHNob3dUb2FzdCgpO1xuICAgIHNldE1lc3NhZ2UoJ1Byb2R1Y3Qgc3VjY2Vzc2Z1bGx5IGFkZGVkJyk7XG4gIH1cblxuICBmdW5jdGlvbiBhZGRQcm9kdWN0Rm9ybU1vZGFsKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8TW9kYWwgc2hvdz17c2hvd30gY2xvc2U9e2Nsb3NlTW9kYWx9IHRpdGxlPXtgQWRkIFByb2R1Y3RgfT5cbiAgICAgICAgPFByb2R1Y3RGb3JtIG9uU3VibWl0PXt2YWwgPT4gYWRkUHJvZHVjdCh2YWwpfSBvbkNsb3NlPXtjbG9zZU1vZGFsfSAvPlxuICAgICAgPC9Nb2RhbD5cbiAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gY29uZmlybURlbGV0ZU1vZGFsKGlkKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxNb2RhbFxuICAgICAgICBzaG93PXtzaG93fVxuICAgICAgICBjbG9zZT17Y2xvc2VNb2RhbH1cbiAgICAgICAgdGl0bGU9e2BEZWxldGUgUHJvZHVjdGB9XG4gICAgICAgIGhhc0Zvb3RlclxuICAgICAgICBvblN1Ym1pdD17YXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IGhhbmRsZURlbGV0ZVByb2R1Y3QoaWQpO1xuICAgICAgICAgIHNob3dUb2FzdCgpO1xuICAgICAgICAgIHNldE1lc3NhZ2UoJ1N1Y2Nlc3NmdWxseSBEZWxldGVkJyk7XG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6ICcycmVtJyB9fT5cbiAgICAgICAgICBBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgcHJvZHVjdD9cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L01vZGFsPlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxMYXlvdXQ+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRhaW5lclwiPlxuICAgICAgICA8VG9hc3QgaXNPcGVuPXtpc09wZW59IG1lc3NhZ2U9e21lc3NhZ2V9IC8+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwid2VsY29tZS10ZXh0XCI+SGksIFdlbGNvbWUgQmFjayBBZG1pbjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImhlYWRlclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFnZS10aXRsZVwiPiBMaXN0IG9mIEFsbCBQcm9kdWN0cyA8L2Rpdj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBvcGVuTW9kYWwoYWRkUHJvZHVjdEZvcm1Nb2RhbCl9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJidG5cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImJ0bi10ZXh0XCI+IEFkZCBQcm9kdWN0PC9zcGFuPlxuICAgICAgICAgICAgPElvTWRBZGQgLz5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtsb2FkaW5nID8gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibG9hZGluZy1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxTcGlubmVyIHdpZHRoPVwiODBcIiBoZWlnaHQ9XCI5MFwiIGNvbG9yPXtgdmFyKC0tY29sb3ItcHJpbWFyeSlgfSAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8UHJvZHVjdFRhYmxlXG4gICAgICAgICAgICAgIHByb2R1Y3RzPXtwcm9kdWN0c31cbiAgICAgICAgICAgICAgZGVsZXRlUHJvZHVjdD17aWQgPT4gb3Blbk1vZGFsKGNvbmZpcm1EZWxldGVNb2RhbChpZCkpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxQYWdpbmF0aW9uIHRvdGFsPXtwcm9kdWN0cy5sZW5ndGh9IGxpbWl0PXs0fSBhY3RpdmVQYWdlPXtwYWdlfSAvPlxuICAgICAgICAgIDwvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+eycgJ31cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLmNvbnRhaW5lciB7XG4gICAgICAgICAgbWF4LXdpZHRoOiAxMjByZW07XG4gICAgICAgICAgbWFyZ2luOiAzcmVtIGF1dG87XG4gICAgICAgICAgcGFkZGluZzogMCAycmVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLmxvYWRpbmctY29udGFpbmVyIHtcbiAgICAgICAgICBtYXJnaW46IDEwcmVtIDA7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIC5wYWdlLXRpdGxlIHtcbiAgICAgICAgICBmb250LXNpemU6IDIuNXJlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5oZWFkZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICB9XG5cbiAgICAgICAgLndlbGNvbWUtdGV4dCB7XG4gICAgICAgICAgZm9udC1zaXplOiAycmVtO1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAycmVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLmJ0biB7XG4gICAgICAgICAgaGVpZ2h0OiA1cmVtO1xuICAgICAgICAgIHBhZGRpbmc6IDAgMnJlbTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1kYXJrKTtcbiAgICAgICAgICBjb2xvcjogI2ZmZjtcbiAgICAgICAgICBmb250LXNpemU6IDJyZW07XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgLmJ0bi10ZXh0IHtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDAuNXJlbTtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPnsnICd9XG4gICAgPC9MYXlvdXQ+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBZG1pbjtcbiJdfQ== */\\n/*@ sourceURL=/home/russ/projects/dress-shop/pages/admin/index.js */\"), ' ');\n};\n\nexport default Admin;","map":{"version":3,"sources":["/home/russ/projects/dress-shop/pages/admin/index.js"],"names":["React","useState","useEffect","IoMdAdd","useModal","useToast","Modal","Toast","Spinner","Layout","ProductForm","ProductTable","axios","baseURL","Pagination","Admin","show","closeModal","openModal","isOpen","showToast","message","setMessage","products","setProducts","loading","setLoading","limit","page","getProducts","payload","params","data","get","error","console","log","response","handleDeleteProduct","id","delete","filteredProducts","filter","product","_id","addProduct","addProductFormModal","val","confirmDeleteModal","fontSize","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { IoMdAdd } from 'react-icons/io';\nimport { useModal } from '../../store';\nimport { useToast } from '../../hooks';\nimport { Modal, Toast, Spinner } from '../../components/Shared';\nimport Layout from '../../components/Layout';\nimport ProductForm from '../../components/Admin/Home/ProductForm';\nimport ProductTable from '../../components/Admin/Home/ProductTable';\nimport axios from 'axios';\nimport baseURL from '../../utils/baseURL';\nimport Pagination from '../../components/Shared/Pagination';\n\nconst Admin = () => {\n  const { show, closeModal, openModal } = useModal();\n  const { isOpen, showToast } = useToast();\n  const [message, setMessage] = useState('');\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const limit = 10;\n  const page = 1;\n\n  useEffect(() => {\n    async function getProducts() {\n      try {\n        const payload = { params: { page: 1, limit } };\n        const { data } = await axios.get(`${baseURL}/api/products`, payload);\n        setProducts(data.products);\n        setLoading(false);\n      } catch (error) {\n        console.log(error.response);\n      }\n    }\n    getProducts();\n  }, []);\n\n  async function handleDeleteProduct(id) {\n    try {\n      const payload = { params: { id } };\n      await axios.delete(`${baseURL}/api/product`, payload);\n      const filteredProducts = products.filter(product => product._id !== id);\n      setProducts(filteredProducts);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  function addProduct(product) {\n    setProducts([product, ...products]);\n    showToast();\n    setMessage('Product successfully added');\n  }\n\n  function addProductFormModal() {\n    return (\n      <Modal show={show} close={closeModal} title={`Add Product`}>\n        <ProductForm onSubmit={val => addProduct(val)} onClose={closeModal} />\n      </Modal>\n    );\n  }\n\n  function confirmDeleteModal(id) {\n    return (\n      <Modal\n        show={show}\n        close={closeModal}\n        title={`Delete Product`}\n        hasFooter\n        onSubmit={async () => {\n          await handleDeleteProduct(id);\n          showToast();\n          setMessage('Successfully Deleted');\n        }}\n      >\n        <div style={{ fontSize: '2rem' }}>\n          Are you sure you want to delete this product?\n        </div>\n      </Modal>\n    );\n  }\n\n  return (\n    <Layout>\n      <div className=\"container\">\n        <Toast isOpen={isOpen} message={message} />\n        <div className=\"welcome-text\">Hi, Welcome Back Admin</div>\n        <div className=\"header\">\n          <div className=\"page-title\"> List of All Products </div>\n          <button\n            onClick={() => openModal(addProductFormModal)}\n            className=\"btn\"\n          >\n            <span className=\"btn-text\"> Add Product</span>\n            <IoMdAdd />\n          </button>\n        </div>\n        {loading ? (\n          <div className=\"loading-container\">\n            <Spinner width=\"80\" height=\"90\" color={`var(--color-primary)`} />\n          </div>\n        ) : (\n          <>\n            <ProductTable\n              products={products}\n              deleteProduct={id => openModal(confirmDeleteModal(id))}\n            />\n            <Pagination total={products.length} limit={4} activePage={page} />\n          </>\n        )}\n      </div>{' '}\n      <style jsx>{`\n        .container {\n          max-width: 120rem;\n          margin: 3rem auto;\n          padding: 0 2rem;\n        }\n\n        .loading-container {\n          margin: 10rem 0;\n          text-align: center;\n        }\n        .page-title {\n          font-size: 2.5rem;\n        }\n\n        .header {\n          display: flex;\n          justify-content: space-between;\n        }\n\n        .welcome-text {\n          font-size: 2rem;\n          padding-bottom: 2rem;\n        }\n\n        .btn {\n          height: 5rem;\n          padding: 0 2rem;\n          background-color: var(--color-dark);\n          color: #fff;\n          font-size: 2rem;\n          border: 1px solid transparent;\n          cursor: pointer;\n        }\n\n        .btn-text {\n          margin-right: 0.5rem;\n        }\n      `}</style>{' '}\n    </Layout>\n  );\n};\n\nexport default Admin;\n"]},"metadata":{},"sourceType":"module"}