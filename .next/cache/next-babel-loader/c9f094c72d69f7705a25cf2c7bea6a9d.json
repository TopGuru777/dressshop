{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/russ/projects/dress-shop/pages/admin/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport Layout from '../../components/Layout';\nimport axios from 'axios';\nimport baseURL from '../../utils/baseURL';\nimport Spinner from '../../components/Shared/Loader/Spinner';\nimport useModal from '../../hooks/useModal';\nimport Modal from '../../components/Shared/Modal';\n\nconst Admin = () => {\n  const initState = {\n    name: '',\n    price: '',\n    description: '',\n    category: ''\n  };\n  const {\n    0: product,\n    1: setProduct\n  } = useState(initState);\n  const {\n    0: imagePreview,\n    1: setImagePreview\n  } = useState('');\n  const {\n    0: file,\n    1: setFile\n  } = useState('');\n  const {\n    0: submit,\n    1: setSubmit\n  } = useState(false);\n  const {\n    show,\n    closeModal,\n    openModal\n  } = useModal();\n\n  const handleChange = e => {\n    if (e.target.name === 'file') {\n      let reader = new FileReader();\n\n      reader.onloadend = () => {\n        setImagePreview(reader.result);\n      };\n\n      reader.readAsDataURL(event.target.files[0]);\n      setFile(e.target.files[0]);\n    } else {\n      setProduct(_objectSpread({}, product, {\n        [e.target.name]: e.target.value\n      }));\n    }\n  };\n\n  const imageUpload = async () => {\n    try {\n      let data = new FormData();\n      data.append('file', file);\n      data.append('upload_preset', 'dress-shop');\n      data.append('cloud_name', 'djlbfjouc'); //upload image to cloudinary\n\n      const res = await axios.post(process.env.CLOUDINARY_URL, data);\n      return res.data.secure_url;\n    } catch (error) {\n      console.log(error.response);\n    }\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      setSubmit(true); //get url of image\n\n      const imageURL = await imageUpload();\n\n      const payload = _objectSpread({}, product, {\n        imageURL\n      }); //save product to db\n\n\n      await axios.post(`${baseURL}/api/products`, payload);\n      reset();\n    } catch (error) {\n      console.log(error.response);\n    } finally {\n      setSubmit(false);\n    }\n  };\n\n  const reset = () => {\n    setProduct(initState);\n    setFile('');\n    setImagePreview('');\n  };\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-1678889007\" + \" \" + \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, __jsx(Modal, {\n    isOpen: show,\n    close: closeModal,\n    title: `Add Product`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    onClick: openModal,\n    className: \"jsx-1678889007\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \" Add Product\"), __jsx(\"div\", {\n    className: \"jsx-1678889007\" + \" \" + \"page-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \" Add Product \")), ' ', __jsx(_JSXStyle, {\n    id: \"1678889007\",\n    __self: this\n  }, \".container.jsx-1678889007{max-width:120rem;margin:3rem auto;padding:0 2rem;}.page-title.jsx-1678889007{font-size:3rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1c3MvcHJvamVjdHMvZHJlc3Mtc2hvcC9wYWdlcy9hZG1pbi9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFtRmtCLEFBRzRCLEFBS0YsZUFDakIsRUFMbUIsaUJBQ0YsZUFDakIiLCJmaWxlIjoiL2hvbWUvcnVzcy9wcm9qZWN0cy9kcmVzcy1zaG9wL3BhZ2VzL2FkbWluL2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IExheW91dCBmcm9tICcuLi8uLi9jb21wb25lbnRzL0xheW91dCc7XG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IGJhc2VVUkwgZnJvbSAnLi4vLi4vdXRpbHMvYmFzZVVSTCc7XG5pbXBvcnQgU3Bpbm5lciBmcm9tICcuLi8uLi9jb21wb25lbnRzL1NoYXJlZC9Mb2FkZXIvU3Bpbm5lcic7XG5pbXBvcnQgdXNlTW9kYWwgZnJvbSAnLi4vLi4vaG9va3MvdXNlTW9kYWwnO1xuaW1wb3J0IE1vZGFsIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvU2hhcmVkL01vZGFsJztcblxuY29uc3QgQWRtaW4gPSAoKSA9PiB7XG4gIGNvbnN0IGluaXRTdGF0ZSA9IHtcbiAgICBuYW1lOiAnJyxcbiAgICBwcmljZTogJycsXG4gICAgZGVzY3JpcHRpb246ICcnLFxuICAgIGNhdGVnb3J5OiAnJ1xuICB9O1xuXG4gIGNvbnN0IFtwcm9kdWN0LCBzZXRQcm9kdWN0XSA9IHVzZVN0YXRlKGluaXRTdGF0ZSk7XG4gIGNvbnN0IFtpbWFnZVByZXZpZXcsIHNldEltYWdlUHJldmlld10gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtmaWxlLCBzZXRGaWxlXSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW3N1Ym1pdCwgc2V0U3VibWl0XSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCB7IHNob3csIGNsb3NlTW9kYWwsIG9wZW5Nb2RhbCB9ID0gdXNlTW9kYWwoKTtcblxuICBjb25zdCBoYW5kbGVDaGFuZ2UgPSBlID0+IHtcbiAgICBpZiAoZS50YXJnZXQubmFtZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSAoKSA9PiB7XG4gICAgICAgIHNldEltYWdlUHJldmlldyhyZWFkZXIucmVzdWx0KTtcbiAgICAgIH07XG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChldmVudC50YXJnZXQuZmlsZXNbMF0pO1xuICAgICAgc2V0RmlsZShlLnRhcmdldC5maWxlc1swXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFByb2R1Y3Qoe1xuICAgICAgICAuLi5wcm9kdWN0LFxuICAgICAgICBbZS50YXJnZXQubmFtZV06IGUudGFyZ2V0LnZhbHVlXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaW1hZ2VVcGxvYWQgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICBkYXRhLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuICAgICAgZGF0YS5hcHBlbmQoJ3VwbG9hZF9wcmVzZXQnLCAnZHJlc3Mtc2hvcCcpO1xuICAgICAgZGF0YS5hcHBlbmQoJ2Nsb3VkX25hbWUnLCAnZGpsYmZqb3VjJyk7XG4gICAgICAvL3VwbG9hZCBpbWFnZSB0byBjbG91ZGluYXJ5XG4gICAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5wb3N0KHByb2Nlc3MuZW52LkNMT1VESU5BUllfVVJMLCBkYXRhKTtcbiAgICAgIHJldHVybiByZXMuZGF0YS5zZWN1cmVfdXJsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB0cnkge1xuICAgICAgc2V0U3VibWl0KHRydWUpO1xuICAgICAgLy9nZXQgdXJsIG9mIGltYWdlXG4gICAgICBjb25zdCBpbWFnZVVSTCA9IGF3YWl0IGltYWdlVXBsb2FkKCk7XG4gICAgICBjb25zdCBwYXlsb2FkID0geyAuLi5wcm9kdWN0LCBpbWFnZVVSTCB9O1xuICAgICAgLy9zYXZlIHByb2R1Y3QgdG8gZGJcbiAgICAgIGF3YWl0IGF4aW9zLnBvc3QoYCR7YmFzZVVSTH0vYXBpL3Byb2R1Y3RzYCwgcGF5bG9hZCk7XG4gICAgICByZXNldCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldFN1Ym1pdChmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJlc2V0ID0gKCkgPT4ge1xuICAgIHNldFByb2R1Y3QoaW5pdFN0YXRlKTtcbiAgICBzZXRGaWxlKCcnKTtcbiAgICBzZXRJbWFnZVByZXZpZXcoJycpO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPExheW91dD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyXCI+XG4gICAgICAgIDxNb2RhbCBpc09wZW49e3Nob3d9IGNsb3NlPXtjbG9zZU1vZGFsfSB0aXRsZT17YEFkZCBQcm9kdWN0YH0+PC9Nb2RhbD5cbiAgICAgICAgPGJ1dHRvbiBvbkNsaWNrPXtvcGVuTW9kYWx9PiBBZGQgUHJvZHVjdDwvYnV0dG9uPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZ2UtdGl0bGVcIj4gQWRkIFByb2R1Y3QgPC9kaXY+XG4gICAgICA8L2Rpdj57JyAnfVxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAuY29udGFpbmVyIHtcbiAgICAgICAgICBtYXgtd2lkdGg6IDEyMHJlbTtcbiAgICAgICAgICBtYXJnaW46IDNyZW0gYXV0bztcbiAgICAgICAgICBwYWRkaW5nOiAwIDJyZW07XG4gICAgICAgIH1cbiAgICAgICAgLnBhZ2UtdGl0bGUge1xuICAgICAgICAgIGZvbnQtc2l6ZTogM3JlbTtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPnsnICd9XG4gICAgPC9MYXlvdXQ+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBZG1pbjtcbiJdfQ== */\\n/*@ sourceURL=/home/russ/projects/dress-shop/pages/admin/index.js */\"), ' ');\n};\n\nexport default Admin;","map":{"version":3,"sources":["/home/russ/projects/dress-shop/pages/admin/index.js"],"names":["React","useState","Layout","axios","baseURL","Spinner","useModal","Modal","Admin","initState","name","price","description","category","product","setProduct","imagePreview","setImagePreview","file","setFile","submit","setSubmit","show","closeModal","openModal","handleChange","e","target","reader","FileReader","onloadend","result","readAsDataURL","event","files","value","imageUpload","data","FormData","append","res","post","process","env","CLOUDINARY_URL","secure_url","error","console","log","response","handleSubmit","preventDefault","imageURL","payload","reset"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Layout from '../../components/Layout';\nimport axios from 'axios';\nimport baseURL from '../../utils/baseURL';\nimport Spinner from '../../components/Shared/Loader/Spinner';\nimport useModal from '../../hooks/useModal';\nimport Modal from '../../components/Shared/Modal';\n\nconst Admin = () => {\n  const initState = {\n    name: '',\n    price: '',\n    description: '',\n    category: ''\n  };\n\n  const [product, setProduct] = useState(initState);\n  const [imagePreview, setImagePreview] = useState('');\n  const [file, setFile] = useState('');\n  const [submit, setSubmit] = useState(false);\n\n  const { show, closeModal, openModal } = useModal();\n\n  const handleChange = e => {\n    if (e.target.name === 'file') {\n      let reader = new FileReader();\n      reader.onloadend = () => {\n        setImagePreview(reader.result);\n      };\n      reader.readAsDataURL(event.target.files[0]);\n      setFile(e.target.files[0]);\n    } else {\n      setProduct({\n        ...product,\n        [e.target.name]: e.target.value\n      });\n    }\n  };\n\n  const imageUpload = async () => {\n    try {\n      let data = new FormData();\n      data.append('file', file);\n      data.append('upload_preset', 'dress-shop');\n      data.append('cloud_name', 'djlbfjouc');\n      //upload image to cloudinary\n      const res = await axios.post(process.env.CLOUDINARY_URL, data);\n      return res.data.secure_url;\n    } catch (error) {\n      console.log(error.response);\n    }\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      setSubmit(true);\n      //get url of image\n      const imageURL = await imageUpload();\n      const payload = { ...product, imageURL };\n      //save product to db\n      await axios.post(`${baseURL}/api/products`, payload);\n      reset();\n    } catch (error) {\n      console.log(error.response);\n    } finally {\n      setSubmit(false);\n    }\n  };\n\n  const reset = () => {\n    setProduct(initState);\n    setFile('');\n    setImagePreview('');\n  };\n\n  return (\n    <Layout>\n      <div className=\"container\">\n        <Modal isOpen={show} close={closeModal} title={`Add Product`}></Modal>\n        <button onClick={openModal}> Add Product</button>\n        <div className=\"page-title\"> Add Product </div>\n      </div>{' '}\n      <style jsx>{`\n        .container {\n          max-width: 120rem;\n          margin: 3rem auto;\n          padding: 0 2rem;\n        }\n        .page-title {\n          font-size: 3rem;\n        }\n      `}</style>{' '}\n    </Layout>\n  );\n};\n\nexport default Admin;\n"]},"metadata":{},"sourceType":"module"}