{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/russ/projects/dress-shop/pages/admin/index.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport Layout from '../../components/Layout';\nimport axios from 'axios';\nimport baseURL from '../../utils/baseURL';\nimport Spinner from '../../components/Shared/Loader/Spinner';\nimport useModal from '../../hooks/useModal';\nimport Modal from '../../components/Shared/Modal';\n\nvar Admin = function Admin() {\n  var initState = {\n    name: '',\n    price: '',\n    description: '',\n    category: ''\n  };\n\n  var _useState = useState(initState),\n      product = _useState[0],\n      setProduct = _useState[1];\n\n  var _useState2 = useState(''),\n      imagePreview = _useState2[0],\n      setImagePreview = _useState2[1];\n\n  var _useState3 = useState(''),\n      file = _useState3[0],\n      setFile = _useState3[1];\n\n  var _useState4 = useState(false),\n      submit = _useState4[0],\n      setSubmit = _useState4[1];\n\n  var _useModal = useModal(),\n      show = _useModal.show,\n      closeModal = _useModal.closeModal,\n      openModal = _useModal.openModal;\n\n  var handleChange = function handleChange(e) {\n    if (e.target.name === 'file') {\n      var reader = new FileReader();\n\n      reader.onloadend = function () {\n        setImagePreview(reader.result);\n      };\n\n      reader.readAsDataURL(event.target.files[0]);\n      setFile(e.target.files[0]);\n    } else {\n      setProduct(_objectSpread({}, product, _defineProperty({}, e.target.name, e.target.value)));\n    }\n  };\n\n  var imageUpload = function imageUpload() {\n    var data, res;\n    return _regeneratorRuntime.async(function imageUpload$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            data = new FormData();\n            data.append('file', file);\n            data.append('upload_preset', 'dress-shop');\n            data.append('cloud_name', 'djlbfjouc'); //upload image to cloudinary\n\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(axios.post(process.env.CLOUDINARY_URL, data));\n\n          case 7:\n            res = _context.sent;\n            return _context.abrupt(\"return\", res.data.secure_url);\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0.response);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 11]]);\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    var imageURL, payload;\n    return _regeneratorRuntime.async(function handleSubmit$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            e.preventDefault();\n            _context2.prev = 1;\n            setSubmit(true); //get url of image\n\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(imageUpload());\n\n          case 5:\n            imageURL = _context2.sent;\n            payload = _objectSpread({}, product, {\n              imageURL: imageURL\n            }); //save product to db\n\n            _context2.next = 9;\n            return _regeneratorRuntime.awrap(axios.post(\"\".concat(baseURL, \"/api/products\"), payload));\n\n          case 9:\n            reset();\n            _context2.next = 15;\n            break;\n\n          case 12:\n            _context2.prev = 12;\n            _context2.t0 = _context2[\"catch\"](1);\n            console.log(_context2.t0.response);\n\n          case 15:\n            _context2.prev = 15;\n            setSubmit(false);\n            return _context2.finish(15);\n\n          case 18:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[1, 12, 15, 18]]);\n  };\n\n  var reset = function reset() {\n    setProduct(initState);\n    setFile('');\n    setImagePreview('');\n  };\n\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-741553259\" + \" \" + \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, __jsx(Modal, {\n    isOpen: show,\n    close: closeModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"jsx-741553259\" + \" \" + \"form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-741553259\" + \" \" + \"group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    placeholder: \"Product Name\",\n    onChange: handleChange,\n    required: true,\n    value: product.name,\n    className: \"jsx-741553259\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"jsx-741553259\" + \" \" + \"group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-741553259\" + \" \" + \"btn-upload-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    type: \"file\",\n    name: \"file\",\n    onChange: handleChange,\n    required: true,\n    className: \"jsx-741553259\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    className: \"jsx-741553259\" + \" \" + \"btn-upload\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"Upload Image\")), __jsx(\"div\", {\n    className: \"jsx-741553259\" + \" \" + \"img-upload-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-741553259\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, imagePreview ? __jsx(\"img\", {\n    src: imagePreview,\n    className: \"jsx-741553259\" + \" \" + \"preview-img\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }) : __jsx(\"div\", {\n    className: \"jsx-741553259\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \" Image goes here \")))), __jsx(\"div\", {\n    className: \"jsx-741553259\" + \" \" + \"group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"price\",\n    placeholder: \"Product Price\",\n    onChange: handleChange,\n    required: true,\n    value: product.price,\n    className: \"jsx-741553259\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"jsx-741553259\" + \" \" + \"group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"description\",\n    placeholder: \"Product Description\",\n    onChange: handleChange,\n    required: true,\n    value: product.description,\n    className: \"jsx-741553259\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    className: \"jsx-741553259\" + \" \" + \"group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, __jsx(\"select\", {\n    name: \"category\",\n    id: \"\",\n    onChange: handleChange,\n    required: true,\n    value: product.category,\n    className: \"jsx-741553259\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, __jsx(\"option\", {\n    value: \"men\",\n    className: \"jsx-741553259\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, \"Men\"), __jsx(\"option\", {\n    value: \"women\",\n    className: \"jsx-741553259\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, \"Women\"))), __jsx(\"div\", {\n    className: \"jsx-741553259\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, __jsx(\"button\", {\n    disabled: submit,\n    className: \"jsx-741553259\" + \" \" + \"btn-submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, submit ? __jsx(Spinner, {\n    color: \"#fff\",\n    width: 40,\n    height: 40,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }) : 'Submit')))), __jsx(\"button\", {\n    onClick: openModal,\n    className: \"jsx-741553259\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, \" Add Product\"), __jsx(\"div\", {\n    className: \"jsx-741553259\" + \" \" + \"page-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, \" Add Product \")), ' ', __jsx(_JSXStyle, {\n    id: \"741553259\",\n    __self: this\n  }, \".container.jsx-741553259{max-width:120rem;margin:3rem auto;padding:0 2rem;}.page-title.jsx-741553259{font-size:3rem;}.preview-img.jsx-741553259{width:30rem;height:30rem;object-fit:contain;}.form.jsx-741553259{width:60rem;}.form.jsx-741553259 input.jsx-741553259{border:1px solid transparent;border-bottom:1px solid var(--color-dark);width:100%;height:5rem;font-size:1.6rem;}.form.jsx-741553259 input.jsx-741553259:focus{outline:none;}.form.jsx-741553259 select.jsx-741553259{border:1px solid var(--color-dark);width:100%;height:5rem;font-size:1.6rem;background-color:#fff;padding:0 1rem;}.group.jsx-741553259{padding:1rem 0;margin-bottom:1rem;}.btn-submit.jsx-741553259{height:6rem;width:100%;background-color:var(--color-dark);color:#fff;font-size:2rem;border:1px solid transparent;}.img-upload-container.jsx-741553259{position:relative;width:30rem;height:30rem;border:1px solid #eee;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;font-size:1.8rem;overflow:hidden;}.btn-upload-container.jsx-741553259 input.jsx-741553259{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;}.btn-upload-container.jsx-741553259{position:relative;width:20rem;height:5rem;margin-bottom:2rem;cursor:pointer;}.btn-upload.jsx-741553259{background-color:var(--color-dark);border:1px solid transparent;color:#fff;font-size:1.7rem;border-radius:6px;width:100%;height:100%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1c3MvcHJvamVjdHMvZHJlc3Mtc2hvcC9wYWdlcy9hZG1pbi9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFnS2tCLEFBRzRCLEFBS0YsQUFJSCxBQU1BLEFBSWlCLEFBUWhCLEFBSXNCLEFBU3BCLEFBS0gsQUFTTSxBQVlSLEFBU1EsQUFRaUIsVUFoQmpCLEVBekRMLEFBTWYsQUE4QmEsQ0FsQmIsRUF0QkEsQUFtQ3FCLEVBeENGLENBc0RMLEFBcUJBLEtBN0J1QixFQXBDaEIsR0F5RGIsQ0FoRG9DLENBb0M3QixBQXFCRCxJQTNFRyxBQXdDakIsQUEyQlMsQ0FyQ0ksQUFvRGtCLE1BZGxCLENBUVEsQ0FyQkcsQ0E3Q3hCLEVBcUJjLEdBOUJkLEdBb0VjLE1BckNLLEFBY04sR0ErQkksR0FQakIsQUFhYSxDQTNCRSxJQVRFLEVBNUJKLElBY1csQUFtREwsQ0FObkIsTUExRGMsRUE0QmlCLFFBcUNYLEVBaEVELEdBYUYsYUFvREosQ0FoRWIsQ0FhQSxDQWNBLFFBc0NjLFlBQ2QsTUEvQnFCLDZGQUNJLG1HQUNOLGlCQUNELGdCQUNsQiIsImZpbGUiOiIvaG9tZS9ydXNzL3Byb2plY3RzL2RyZXNzLXNob3AvcGFnZXMvYWRtaW4vaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgTGF5b3V0IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvTGF5b3V0JztcbmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgYmFzZVVSTCBmcm9tICcuLi8uLi91dGlscy9iYXNlVVJMJztcbmltcG9ydCBTcGlubmVyIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvU2hhcmVkL0xvYWRlci9TcGlubmVyJztcbmltcG9ydCB1c2VNb2RhbCBmcm9tICcuLi8uLi9ob29rcy91c2VNb2RhbCc7XG5pbXBvcnQgTW9kYWwgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9TaGFyZWQvTW9kYWwnO1xuXG5jb25zdCBBZG1pbiA9ICgpID0+IHtcbiAgY29uc3QgaW5pdFN0YXRlID0ge1xuICAgIG5hbWU6ICcnLFxuICAgIHByaWNlOiAnJyxcbiAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgY2F0ZWdvcnk6ICcnXG4gIH07XG5cbiAgY29uc3QgW3Byb2R1Y3QsIHNldFByb2R1Y3RdID0gdXNlU3RhdGUoaW5pdFN0YXRlKTtcbiAgY29uc3QgW2ltYWdlUHJldmlldywgc2V0SW1hZ2VQcmV2aWV3XSA9IHVzZVN0YXRlKCcnKTtcbiAgY29uc3QgW2ZpbGUsIHNldEZpbGVdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbc3VibWl0LCBzZXRTdWJtaXRdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIGNvbnN0IHsgc2hvdywgY2xvc2VNb2RhbCwgb3Blbk1vZGFsIH0gPSB1c2VNb2RhbCgpO1xuXG4gIGNvbnN0IGhhbmRsZUNoYW5nZSA9IGUgPT4ge1xuICAgIGlmIChlLnRhcmdldC5uYW1lID09PSAnZmlsZScpIHtcbiAgICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9ICgpID0+IHtcbiAgICAgICAgc2V0SW1hZ2VQcmV2aWV3KHJlYWRlci5yZXN1bHQpO1xuICAgICAgfTtcbiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGV2ZW50LnRhcmdldC5maWxlc1swXSk7XG4gICAgICBzZXRGaWxlKGUudGFyZ2V0LmZpbGVzWzBdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0UHJvZHVjdCh7XG4gICAgICAgIC4uLnByb2R1Y3QsXG4gICAgICAgIFtlLnRhcmdldC5uYW1lXTogZS50YXJnZXQudmFsdWVcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBpbWFnZVVwbG9hZCA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgbGV0IGRhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgIGRhdGEuYXBwZW5kKCdmaWxlJywgZmlsZSk7XG4gICAgICBkYXRhLmFwcGVuZCgndXBsb2FkX3ByZXNldCcsICdkcmVzcy1zaG9wJyk7XG4gICAgICBkYXRhLmFwcGVuZCgnY2xvdWRfbmFtZScsICdkamxiZmpvdWMnKTtcbiAgICAgIC8vdXBsb2FkIGltYWdlIHRvIGNsb3VkaW5hcnlcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLnBvc3QocHJvY2Vzcy5lbnYuQ0xPVURJTkFSWV9VUkwsIGRhdGEpO1xuICAgICAgcmV0dXJuIHJlcy5kYXRhLnNlY3VyZV91cmw7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRyeSB7XG4gICAgICBzZXRTdWJtaXQodHJ1ZSk7XG4gICAgICAvL2dldCB1cmwgb2YgaW1hZ2VcbiAgICAgIGNvbnN0IGltYWdlVVJMID0gYXdhaXQgaW1hZ2VVcGxvYWQoKTtcbiAgICAgIGNvbnN0IHBheWxvYWQgPSB7IC4uLnByb2R1Y3QsIGltYWdlVVJMIH07XG4gICAgICAvL3NhdmUgcHJvZHVjdCB0byBkYlxuICAgICAgYXdhaXQgYXhpb3MucG9zdChgJHtiYXNlVVJMfS9hcGkvcHJvZHVjdHNgLCBwYXlsb2FkKTtcbiAgICAgIHJlc2V0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0U3VibWl0KGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgcmVzZXQgPSAoKSA9PiB7XG4gICAgc2V0UHJvZHVjdChpbml0U3RhdGUpO1xuICAgIHNldEZpbGUoJycpO1xuICAgIHNldEltYWdlUHJldmlldygnJyk7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cbiAgICAgICAgPE1vZGFsIGlzT3Blbj17c2hvd30gY2xvc2U9e2Nsb3NlTW9kYWx9PlxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9IGNsYXNzTmFtZT1cImZvcm1cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JvdXBcIj5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgIG5hbWU9XCJuYW1lXCJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlByb2R1Y3QgTmFtZVwiXG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX1cbiAgICAgICAgICAgICAgICByZXF1aXJlZD17dHJ1ZX1cbiAgICAgICAgICAgICAgICB2YWx1ZT17cHJvZHVjdC5uYW1lfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyb3VwXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnRuLXVwbG9hZC1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJmaWxlXCJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICByZXF1aXJlZD17dHJ1ZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwiYnRuLXVwbG9hZFwiPlVwbG9hZCBJbWFnZTwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImltZy11cGxvYWQtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAge2ltYWdlUHJldmlldyA/IChcbiAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz17aW1hZ2VQcmV2aWV3fSBjbGFzc05hbWU9XCJwcmV2aWV3LWltZ1wiIC8+XG4gICAgICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAgICAgPGRpdj4gSW1hZ2UgZ29lcyBoZXJlIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncm91cFwiPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgbmFtZT1cInByaWNlXCJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlByb2R1Y3QgUHJpY2VcIlxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAgICAgcmVxdWlyZWQ9e3RydWV9XG4gICAgICAgICAgICAgICAgdmFsdWU9e3Byb2R1Y3QucHJpY2V9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JvdXBcIj5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgIG5hbWU9XCJkZXNjcmlwdGlvblwiXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJQcm9kdWN0IERlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIHJlcXVpcmVkPXt0cnVlfVxuICAgICAgICAgICAgICAgIHZhbHVlPXtwcm9kdWN0LmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyb3VwXCI+XG4gICAgICAgICAgICAgIDxzZWxlY3RcbiAgICAgICAgICAgICAgICBuYW1lPVwiY2F0ZWdvcnlcIlxuICAgICAgICAgICAgICAgIGlkPVwiXCJcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfVxuICAgICAgICAgICAgICAgIHJlcXVpcmVkPXt0cnVlfVxuICAgICAgICAgICAgICAgIHZhbHVlPXtwcm9kdWN0LmNhdGVnb3J5fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIm1lblwiPk1lbjwvb3B0aW9uPlxuICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJ3b21lblwiPldvbWVuPC9vcHRpb24+XG4gICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT1cImJ0bi1zdWJtaXRcIiBkaXNhYmxlZD17c3VibWl0fT5cbiAgICAgICAgICAgICAgICB7c3VibWl0ID8gKFxuICAgICAgICAgICAgICAgICAgPFNwaW5uZXIgY29sb3I9XCIjZmZmXCIgd2lkdGg9ezQwfSBoZWlnaHQ9ezQwfSAvPlxuICAgICAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgICAgICAnU3VibWl0J1xuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L01vZGFsPlxuICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e29wZW5Nb2RhbH0+IEFkZCBQcm9kdWN0PC9idXR0b24+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFnZS10aXRsZVwiPiBBZGQgUHJvZHVjdCA8L2Rpdj5cbiAgICAgIDwvZGl2PnsnICd9XG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIC5jb250YWluZXIge1xuICAgICAgICAgIG1heC13aWR0aDogMTIwcmVtO1xuICAgICAgICAgIG1hcmdpbjogM3JlbSBhdXRvO1xuICAgICAgICAgIHBhZGRpbmc6IDAgMnJlbTtcbiAgICAgICAgfVxuICAgICAgICAucGFnZS10aXRsZSB7XG4gICAgICAgICAgZm9udC1zaXplOiAzcmVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLnByZXZpZXctaW1nIHtcbiAgICAgICAgICB3aWR0aDogMzByZW07XG4gICAgICAgICAgaGVpZ2h0OiAzMHJlbTtcbiAgICAgICAgICBvYmplY3QtZml0OiBjb250YWluO1xuICAgICAgICB9XG5cbiAgICAgICAgLmZvcm0ge1xuICAgICAgICAgIHdpZHRoOiA2MHJlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5mb3JtIGlucHV0IHtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tY29sb3ItZGFyayk7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgaGVpZ2h0OiA1cmVtO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMS42cmVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLmZvcm0gaW5wdXQ6Zm9jdXMge1xuICAgICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgIH1cblxuICAgICAgICAuZm9ybSBzZWxlY3Qge1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLWRhcmspO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGhlaWdodDogNXJlbTtcbiAgICAgICAgICBmb250LXNpemU6IDEuNnJlbTtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgICAgIHBhZGRpbmc6IDAgMXJlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5ncm91cCB7XG4gICAgICAgICAgcGFkZGluZzogMXJlbSAwO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDFyZW07XG4gICAgICAgIH1cblxuICAgICAgICAuYnRuLXN1Ym1pdCB7XG4gICAgICAgICAgaGVpZ2h0OiA2cmVtO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLWRhcmspO1xuICAgICAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMnJlbTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5pbWctdXBsb2FkLWNvbnRhaW5lciB7XG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgIHdpZHRoOiAzMHJlbTtcbiAgICAgICAgICBoZWlnaHQ6IDMwcmVtO1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlZWU7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMS44cmVtO1xuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIH1cblxuICAgICAgICAuYnRuLXVwbG9hZC1jb250YWluZXIgaW5wdXQge1xuICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgIHRvcDogMDtcbiAgICAgICAgICBsZWZ0OiAwO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5idG4tdXBsb2FkLWNvbnRhaW5lciB7XG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgIHdpZHRoOiAyMHJlbTtcbiAgICAgICAgICBoZWlnaHQ6IDVyZW07XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMnJlbTtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICAuYnRuLXVwbG9hZCB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItZGFyayk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgICAgZm9udC1zaXplOiAxLjdyZW07XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPnsnICd9XG4gICAgPC9MYXlvdXQ+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBBZG1pbjtcbiJdfQ== */\\n/*@ sourceURL=/home/russ/projects/dress-shop/pages/admin/index.js */\"), ' ');\n};\n\nexport default Admin;","map":{"version":3,"sources":["/home/russ/projects/dress-shop/pages/admin/index.js"],"names":["React","useState","Layout","axios","baseURL","Spinner","useModal","Modal","Admin","initState","name","price","description","category","product","setProduct","imagePreview","setImagePreview","file","setFile","submit","setSubmit","show","closeModal","openModal","handleChange","e","target","reader","FileReader","onloadend","result","readAsDataURL","event","files","value","imageUpload","data","FormData","append","post","process","env","CLOUDINARY_URL","res","secure_url","console","log","response","handleSubmit","preventDefault","imageURL","payload","reset"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Layout from '../../components/Layout';\nimport axios from 'axios';\nimport baseURL from '../../utils/baseURL';\nimport Spinner from '../../components/Shared/Loader/Spinner';\nimport useModal from '../../hooks/useModal';\nimport Modal from '../../components/Shared/Modal';\n\nconst Admin = () => {\n  const initState = {\n    name: '',\n    price: '',\n    description: '',\n    category: ''\n  };\n\n  const [product, setProduct] = useState(initState);\n  const [imagePreview, setImagePreview] = useState('');\n  const [file, setFile] = useState('');\n  const [submit, setSubmit] = useState(false);\n\n  const { show, closeModal, openModal } = useModal();\n\n  const handleChange = e => {\n    if (e.target.name === 'file') {\n      let reader = new FileReader();\n      reader.onloadend = () => {\n        setImagePreview(reader.result);\n      };\n      reader.readAsDataURL(event.target.files[0]);\n      setFile(e.target.files[0]);\n    } else {\n      setProduct({\n        ...product,\n        [e.target.name]: e.target.value\n      });\n    }\n  };\n\n  const imageUpload = async () => {\n    try {\n      let data = new FormData();\n      data.append('file', file);\n      data.append('upload_preset', 'dress-shop');\n      data.append('cloud_name', 'djlbfjouc');\n      //upload image to cloudinary\n      const res = await axios.post(process.env.CLOUDINARY_URL, data);\n      return res.data.secure_url;\n    } catch (error) {\n      console.log(error.response);\n    }\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      setSubmit(true);\n      //get url of image\n      const imageURL = await imageUpload();\n      const payload = { ...product, imageURL };\n      //save product to db\n      await axios.post(`${baseURL}/api/products`, payload);\n      reset();\n    } catch (error) {\n      console.log(error.response);\n    } finally {\n      setSubmit(false);\n    }\n  };\n\n  const reset = () => {\n    setProduct(initState);\n    setFile('');\n    setImagePreview('');\n  };\n\n  return (\n    <Layout>\n      <div className=\"container\">\n        <Modal isOpen={show} close={closeModal}>\n          <form onSubmit={handleSubmit} className=\"form\">\n            <div className=\"group\">\n              <input\n                type=\"text\"\n                name=\"name\"\n                placeholder=\"Product Name\"\n                onChange={handleChange}\n                required={true}\n                value={product.name}\n              />\n            </div>\n            <div className=\"group\">\n              <div className=\"btn-upload-container\">\n                <input\n                  type=\"file\"\n                  name=\"file\"\n                  onChange={handleChange}\n                  required={true}\n                />\n                <button className=\"btn-upload\">Upload Image</button>\n              </div>\n\n              <div className=\"img-upload-container\">\n                {\n                  <div>\n                    {imagePreview ? (\n                      <img src={imagePreview} className=\"preview-img\" />\n                    ) : (\n                      <div> Image goes here </div>\n                    )}\n                  </div>\n                }\n              </div>\n            </div>\n            <div className=\"group\">\n              <input\n                type=\"text\"\n                name=\"price\"\n                placeholder=\"Product Price\"\n                onChange={handleChange}\n                required={true}\n                value={product.price}\n              />\n            </div>\n            <div className=\"group\">\n              <input\n                type=\"text\"\n                name=\"description\"\n                placeholder=\"Product Description\"\n                onChange={handleChange}\n                required={true}\n                value={product.description}\n              />\n            </div>\n            <div className=\"group\">\n              <select\n                name=\"category\"\n                id=\"\"\n                onChange={handleChange}\n                required={true}\n                value={product.category}\n              >\n                <option value=\"men\">Men</option>\n                <option value=\"women\">Women</option>\n              </select>\n            </div>\n            <div>\n              <button className=\"btn-submit\" disabled={submit}>\n                {submit ? (\n                  <Spinner color=\"#fff\" width={40} height={40} />\n                ) : (\n                  'Submit'\n                )}\n              </button>\n            </div>\n          </form>\n        </Modal>\n        <button onClick={openModal}> Add Product</button>\n        <div className=\"page-title\"> Add Product </div>\n      </div>{' '}\n      <style jsx>{`\n        .container {\n          max-width: 120rem;\n          margin: 3rem auto;\n          padding: 0 2rem;\n        }\n        .page-title {\n          font-size: 3rem;\n        }\n\n        .preview-img {\n          width: 30rem;\n          height: 30rem;\n          object-fit: contain;\n        }\n\n        .form {\n          width: 60rem;\n        }\n\n        .form input {\n          border: 1px solid transparent;\n          border-bottom: 1px solid var(--color-dark);\n          width: 100%;\n          height: 5rem;\n          font-size: 1.6rem;\n        }\n\n        .form input:focus {\n          outline: none;\n        }\n\n        .form select {\n          border: 1px solid var(--color-dark);\n          width: 100%;\n          height: 5rem;\n          font-size: 1.6rem;\n          background-color: #fff;\n          padding: 0 1rem;\n        }\n\n        .group {\n          padding: 1rem 0;\n          margin-bottom: 1rem;\n        }\n\n        .btn-submit {\n          height: 6rem;\n          width: 100%;\n          background-color: var(--color-dark);\n          color: #fff;\n          font-size: 2rem;\n          border: 1px solid transparent;\n        }\n\n        .img-upload-container {\n          position: relative;\n          width: 30rem;\n          height: 30rem;\n          border: 1px solid #eee;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 1.8rem;\n          overflow: hidden;\n        }\n\n        .btn-upload-container input {\n          opacity: 0;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n        }\n\n        .btn-upload-container {\n          position: relative;\n          width: 20rem;\n          height: 5rem;\n          margin-bottom: 2rem;\n          cursor: pointer;\n        }\n\n        .btn-upload {\n          background-color: var(--color-dark);\n          border: 1px solid transparent;\n          color: #fff;\n          font-size: 1.7rem;\n          border-radius: 6px;\n          width: 100%;\n          height: 100%;\n        }\n      `}</style>{' '}\n    </Layout>\n  );\n};\n\nexport default Admin;\n"]},"metadata":{},"sourceType":"module"}